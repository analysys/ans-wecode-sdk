define(function(){"use strict";var e={base:{outer:["appid","xwho","xwhat","xwhen","xcontext"],xcontext:["$lib","$lib_version","$platform","$debug","$is_login"]},$startup:{xcontext:["$screen_width","$screen_height","$time_zone","$language","$session_id","$is_first_time","$is_first_day","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$is_time_calibrated"]},$track:{xcontext:["$screen_width","$screen_height","$time_zone","$language","$is_first_day","$session_id","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$is_time_calibrated"]},$pageview:{xcontext:["$screen_width","$screen_height","$time_zone","$language","$session_id","$is_first_day","$referrer","$referrer_domain","$title","$url","$startup_time","$utm_campaign_id","$utm_source","$utm_medium","$utm_term","$utm_content","$utm_campaign","$is_time_calibrated"]},$alias:{xcontext:["$original_id"]},$getPresetProperties:{xcontext:["$screen_width","$screen_height","$time_zone","$session_id","$language"]}},s={base:{appid:"",$debug:0,uploadURL:"",auto:!0,autoProfile:!0,hash:!0,singlePage:!0,pageProperty:{},$lib_version:"4.3.0",cross_subdomain:!0,cross_subdomain_super:!0,allowTimeCheck:!1,getDataTimeout:1e4,sendDataTimeout:1e4},status:{code:200,FnName:"",key:"",value:"",errorCode:"",successCode:""},keywords:e.base.xcontext,baseJson:e.base.outer,sendNum:1800,system:{}},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(){}t.prototype.paramType=function(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")},t.prototype.objHasKay=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.prototype.ArrayToObj=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]="";return t},t.prototype.keyValueToObje=function(e,t){var r={};return r[e]=t,r},t.prototype.toDeep=function(e){var t=null;if("Array"===this.paramType(e)){t=[];for(var r=0;r<e.length;r++)t.push(this.toDeep(e[r]))}else if("Object"===this.paramType(e))for(var n in t={},e)t[n]=this.toDeep(e[n]);else t=e;return t},t.prototype.toDeepObj=function(e,t){var r={};if("String"===this.paramType(e))return r=this.keyValueToObje(e,t);if("Array"===this.paramType(e))return r=this.ArrayToObj(e);if("Object"===this.paramType(e))for(var n in e)r[n]=this.toDeepObj(e[n]);return r},t.prototype.toDeep=function(e){var t=null;if("Array"===this.paramType(e)){t=[];for(var r=0;r<e.length;r++)t.push(this.toDeep(e[r]))}else if("Object"===this.paramType(e))for(var n in t={},e)t[n]=this.toDeep(e[n]);else t=e;return t},t.prototype.toObj=function(e,t){var r={};return"String"===this.paramType(e)?r=this.keyValueToObje(e,t):"Array"===this.paramType(e)?r=this.ArrayToObj(e):"Object"===this.paramType(e)?e:r},t.prototype.objMerge=function(e,t){if("Object"!==this.paramType(e)||"Object"!==this.paramType(t))return e;var r,n,a={};for(r in e)a[r]=e[r];for(n in t){var o=t[n],i=a[n],s=this.paramType(o),u=this.paramType(i);a[n]=i&&"Object"===u&&"Object"===s?this.objMerge(i,o):"Array"===u&&"Array"===s?this.arrayMergeUnique(i,o):"Function"===s&&"Function"===u?this.compose(i,o):o}return a},t.prototype.compose=function(){var r=arguments,n=r.length-1;return function(){for(var e=n,t=r[n].apply(this,arguments);e--;)t=r[e].call(this,t);return t}},t.prototype.fnMerge=function(e,t){return this.objMerge(e,t)},t.prototype.arrayUnique=function(e){for(var t=[],r={},n=0;n<e.length;n++)r[e[n]]||(r[e[n]]=!0,t.push(e[n]));return t},t.prototype.arrayMerge=function(e,t){for(var r=[],n=0;n<e.length;n++){var a=e[n];"Object"===this.paramType(e[n])&&(a=this.toDeep(e[n])),r.push(a)}for(var o=0;o<t.length;o++){var i=t[o];"Object"===this.paramType(t[o])&&(i=this.toDeep(t[o])),r.push(i)}return r},t.prototype.arrayMergeUnique=function(e,t){return e.push.apply(e,t),this.arrayUnique(e)},t.prototype.encode=function(e){var t,r,n,a,o,i,s="",u=0;for(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t}(e);u<e.length;)n=(i=e.charCodeAt(u++))>>2,a=(3&i)<<4|(t=e.charCodeAt(u++))>>4,o=(15&t)<<2|(r=e.charCodeAt(u++))>>6,i=63&r,isNaN(t)?o=i=64:isNaN(r)&&(i=64),s=s+c.charAt(n)+c.charAt(a)+c.charAt(o)+c.charAt(i);return s},t.prototype.decode=function(e){var t,r,n,a,o,i="",s=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");s<e.length;)t=c.indexOf(e.charAt(s++))<<2|(n=c.indexOf(e.charAt(s++)))>>4,r=(15&n)<<4|(a=c.indexOf(e.charAt(s++)))>>2,n=(3&a)<<6|(o=c.indexOf(e.charAt(s++))),i+=String.fromCharCode(t),64!==a&&(i+=String.fromCharCode(r)),64!==o&&(i+=String.fromCharCode(n));return i=function(e){for(var t,r,n="",a=0,o=0;a<e.length;)(t=e.charCodeAt(a))<128?(n+=String.fromCharCode(t),a++):191<t&&t<224?(o=e.charCodeAt(a+1),n+=String.fromCharCode((31&t)<<6|63&o),a+=2):(o=e.charCodeAt(a+1),r=e.charCodeAt(a+2),n+=String.fromCharCode((15&t)<<12|(63&o)<<6|63&r),a+=3);return n}(i)},t.prototype.isEmptyObject=function(e){for(var t in e)return!1;return!0},t.prototype.format=function(e,t){var r,n=e.getTimezoneOffset(),a={"M+":(e=new Date(e.getTime()+60*n*1e3+288e5)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,3===RegExp.$1.length?(""+a[r]).length<3?("00"+a[r]).substr(("00"+a[r]).length-3,("00"+a[r]).length):a[r]:("00"+a[r]).substr((""+a[r]).length)));return t},t.prototype.MD5=function(e,t){function u(e,t){return e<<t|e>>>32-t}function c(e,t){var r=2147483648&e,n=2147483648&t,a=1073741824&e,o=1073741824&t,t=(1073741823&e)+(1073741823&t);return a&o?2147483648^t^r^n:a|o?1073741824&t?3221225472^t^r^n:1073741824^t^r^n:t^r^n}function r(e,t,r,n,a,o,i){var s;return e=c(e,c(c((s=t)&r|~s&n,a),i)),c(u(e,o),t)}function n(e,t,r,n,a,o,i){return e=c(e,c(c(t&(n=n)|r&~n,a),i)),c(u(e,o),t)}function a(e,t,r,n,a,o,i){return e=c(e,c(c(t^r^n,a),i)),c(u(e,o),t)}function o(e,t,r,n,a,o,i){return e=c(e,c(c(r^(t|~n),a),i)),c(u(e,o),t)}function i(e){for(var t="",r="",n=0;n<=3;n++)t+=(r="0"+(e>>>8*n&255).toString(16)).substr(r.length-2,2);return t}for(var s,l,p,m,y=function(e){for(var t,r=e.length,n=16*(1+((n=r+8)-n%64)/64),a=Array(n-1),o=0,i=0;i<r;)o=i%4*8,a[t=(i-i%4)/4]=a[t]|e.charCodeAt(i)<<o,i++;return o=i%4*8,a[t=(i-i%4)/4]=a[t]|128<<o,a[n-2]=r<<3,a[n-1]=r>>>29,a}(e),d=1732584193,g=4023233417,f=2562383102,h=271733878,v=0;v<y.length;v+=16)d=r(s=d,l=g,p=f,m=h,y[v+0],7,3614090360),h=r(h,d,g,f,y[v+1],12,3905402710),f=r(f,h,d,g,y[v+2],17,606105819),g=r(g,f,h,d,y[v+3],22,3250441966),d=r(d,g,f,h,y[v+4],7,4118548399),h=r(h,d,g,f,y[v+5],12,1200080426),f=r(f,h,d,g,y[v+6],17,2821735955),g=r(g,f,h,d,y[v+7],22,4249261313),d=r(d,g,f,h,y[v+8],7,1770035416),h=r(h,d,g,f,y[v+9],12,2336552879),f=r(f,h,d,g,y[v+10],17,4294925233),g=r(g,f,h,d,y[v+11],22,2304563134),d=r(d,g,f,h,y[v+12],7,1804603682),h=r(h,d,g,f,y[v+13],12,4254626195),f=r(f,h,d,g,y[v+14],17,2792965006),d=n(d,g=r(g,f,h,d,y[v+15],22,1236535329),f,h,y[v+1],5,4129170786),h=n(h,d,g,f,y[v+6],9,3225465664),f=n(f,h,d,g,y[v+11],14,643717713),g=n(g,f,h,d,y[v+0],20,3921069994),d=n(d,g,f,h,y[v+5],5,3593408605),h=n(h,d,g,f,y[v+10],9,38016083),f=n(f,h,d,g,y[v+15],14,3634488961),g=n(g,f,h,d,y[v+4],20,3889429448),d=n(d,g,f,h,y[v+9],5,568446438),h=n(h,d,g,f,y[v+14],9,3275163606),f=n(f,h,d,g,y[v+3],14,4107603335),g=n(g,f,h,d,y[v+8],20,1163531501),d=n(d,g,f,h,y[v+13],5,2850285829),h=n(h,d,g,f,y[v+2],9,4243563512),f=n(f,h,d,g,y[v+7],14,1735328473),d=a(d,g=n(g,f,h,d,y[v+12],20,2368359562),f,h,y[v+5],4,4294588738),h=a(h,d,g,f,y[v+8],11,2272392833),f=a(f,h,d,g,y[v+11],16,1839030562),g=a(g,f,h,d,y[v+14],23,4259657740),d=a(d,g,f,h,y[v+1],4,2763975236),h=a(h,d,g,f,y[v+4],11,1272893353),f=a(f,h,d,g,y[v+7],16,4139469664),g=a(g,f,h,d,y[v+10],23,3200236656),d=a(d,g,f,h,y[v+13],4,681279174),h=a(h,d,g,f,y[v+0],11,3936430074),f=a(f,h,d,g,y[v+3],16,3572445317),g=a(g,f,h,d,y[v+6],23,76029189),d=a(d,g,f,h,y[v+9],4,3654602809),h=a(h,d,g,f,y[v+12],11,3873151461),f=a(f,h,d,g,y[v+15],16,530742520),d=o(d,g=a(g,f,h,d,y[v+2],23,3299628645),f,h,y[v+0],6,4096336452),h=o(h,d,g,f,y[v+7],10,1126891415),f=o(f,h,d,g,y[v+14],15,2878612391),g=o(g,f,h,d,y[v+5],21,4237533241),d=o(d,g,f,h,y[v+12],6,1700485571),h=o(h,d,g,f,y[v+3],10,2399980690),f=o(f,h,d,g,y[v+10],15,4293915773),g=o(g,f,h,d,y[v+1],21,2240044497),d=o(d,g,f,h,y[v+8],6,1873313359),h=o(h,d,g,f,y[v+15],10,4264355552),f=o(f,h,d,g,y[v+6],15,2734768916),g=o(g,f,h,d,y[v+13],21,1309151649),d=o(d,g,f,h,y[v+4],6,4149444226),h=o(h,d,g,f,y[v+11],10,3174756917),f=o(f,h,d,g,y[v+2],15,718787259),g=o(g,f,h,d,y[v+9],21,3951481745),d=c(d,s),g=c(g,l),f=c(f,p),h=c(h,m);return 32===t?i(d)+i(g)+i(f)+i(h):i(g)+i(f)},t.prototype.clientTimeZone=function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),r=e%60,e="-";return(t<=0||r<0)&&(e="+",t=-t,r<0&&(r=-r)),1===(t+="").length&&(t="0"+t),1===(r+="").length&&(r="0"+r),e+t+":"+r},t.prototype.delEmpty=function(e){var t,r,n={};for(t in e){var a=!0,o=this.paramType(e[t]);"Object"!==o?(e[t]||"Number"===o&&!isNaN(e[t])||"Boolean"===o||(a=!1),!0===a&&(n[t]=e[t])):n[t]=this.delEmpty(e[t])}for(r in n){var i,s=[];for(i in n[r])s.push(n[r][i]);0===s.length&&n[r].constructor===Object&&delete n[r]}return n},t.prototype.addEvent=function(e,t,r,n){if(document.addEventListener)if("Array"!==this.paramType(e)&&"HTMLCollection"!==this.paramType(e)||!e.length||e===window)e.addEventListener(t,r,n);else for(var a=0;a<e.length;a++)this.addEvent(e[a],t,r,n);else if(e.length&&e!==window)for(var o=0;o<e.length;o++)this.addEvent(e[o],t,r);else e.attachEvent("on"+t,function(){return r.call(e,window.event)})},t.prototype.GetUrlParam=function(e){var t=document.location.toString(),r=window.name;"String"===this.paramType(r)&&-1<r.indexOf(e)&&(t=r);var n,a=t.split("?");if(1<a.length){for(var o,i=[],s=1;s<a.length;s++)i.push.apply(i,a[s].split("&"));for(var u=0;u<i.length;u++)if(null!=(o=i[u].split("="))&&o[0]===e){var c=o[1];if(-1<o[1].indexOf("#")&&(c=c.split("#")[0]),-1<c.indexOf("%")){try{var l=decodeURI(c);if(n=l,!!new RegExp("[\\u4E00-\\u9FFF]+","g").test(n))return l}catch(p){}if("Object"===this.paramType(window.AnalysysModule)&&"Function"===this.paramType(window.AnalysysModule.decodeGBK))try{return window.AnalysysModule.decodeGBK(c,"gbk")}catch(p){}}return c}return""}return""},t.prototype.stringSlice=function(e,t){return e.slice(0,t)},t.prototype.trim=function(e){return"String"===this.paramType(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},t.prototype.changeHash=function(e){var t=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(){t.apply(window.history,arguments),e.apply(e)},window.history.replaceState=function(){r.apply(window.history,arguments),e.apply(e)};var n=t?"popstate":"hashchange";"on"+(n=window.ActiveXObject||"ActiveXObject"in window?"hashchange":"popstate")in window&&this.addEvent(window,n,function(){setTimeout(e,0)})},t.prototype.checkTypeList=function(e,t){var r=this.paramType(e);if("String"===r){var n=window.location.href,a=window.location.protocol+"//"+window.location.host,o=a+window.location.pathname;if(-1<[n,a,o+"index.html",o,o+window.location.hash].indexOf(e))return!0}else{if("Function"===r)return e.call(e,t);if("Array"===r)for(var i=0;i<e.length;i++)if(!0===this.checkTypeList(e[i],t))return!0}return!1},t.prototype.selectorAllEleList=function(e){var t=[],r=e.split(".")[0];if("Function"===this.paramType(document.querySelectorAll)&&e.indexOf("|")<0)try{return document.querySelectorAll(e)}catch(y){}var n;if(-1<e.indexOf("#")){n=e.split(".")[0].split("#")[1];var a=document.getElementById(n);a&&t.push(a)}else{if(e.indexOf(".")<0)return document.getElementsByTagName(r);if(-1<e.indexOf("[")&&-1<e.indexOf("]"))for(var o=document.getElementsByTagName("*"),i=e.replace("[","").replace("]",""),s=0;s<o.length;s++){var u=o[s].getAttribute(i);"String"===this.paramType(u)&&t.push(a)}else for(var c=document.getElementsByTagName(r),l=0;l<c.length;l++){var p=c[l],m="String"===this.paramType(p.className)?p.className.split(" "):[];0<m.length&&-1<(r+"."+m.join(".")).indexOf(e)&&t.push(p)}}return t},t.prototype.getDomainFromUrl=function(e,t){if(""===t)return"";var r=(t=t||window.location.hostname).split("/");2<r.length&&(t=r[2]);if(!0===/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t)||"localhost"===t)return"";var n=t.split("."),a=!0===e?2:n.length;("Number"!==this.paramType(a)||a<2)&&(a=2);var o=[];if(!(1<n.length))return"";n.length<a&&(a=n.length);for(var i=n.length-1;0<=i&&o.length!==a;i--)o.push(n[i]);return o.reverse().join(".")},t.prototype.getUrlPath=function(){var e=window.location.hash;return-1<e.indexOf("?")&&(e=e.split("?")[0]),window.location.host+window.location.pathname+e};var p=new t;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n="",a="";try{n="object"===i(window.localStorage)?window.localStorage:"",a="object"===i(window.sessionStorage)?window.sessionStorage:""}catch(it){}function r(){this.localName="FZ_STROAGE",this.sessionName="FZ_SESSION",this.cookieName="FZ_STROAGE."+p.getDomainFromUrl(s.base.cross_subdomain),this.checkSubdomain(),this.localObj=this.getLocal(),this.sessionObj=this.getSession()}r.prototype.checkSubdomain=function(){var e,t,r,n=window.AnalysysAgent||[];if("Array"===p.paramType(n))for(var a=0;a<n.length;a++)"cross_subdomain"===n[a][0]&&"Boolean"===p.paramType(n[a][1])&&(s.base.cross_subdomain=n[a][1]);n&&p.objHasKay(n.config||{},"cross_subdomain")&&(s.base.cross_subdomain=n.config.cross_subdomain),!0===s.base.cross_subdomain&&(r=this.getCookie(this.cookieName)||p.encode("{}"),r=JSON.parse(p.decode(decodeURIComponent(r))),"Object"!==p.paramType(r)||p.isEmptyObject(r)||(e=r.ARK_ID,t={},!0===p.objHasKay(r,"ARKSUPER")&&(t=r.ARKSUPER,delete r.ARKSUPER),r=p.objMerge(this.localObj||{},r),!0!==s.base.cross_subdomain_super||p.isEmptyObject(t)||(r=p.objMerge({ARKSUPER:t},r)),this.setLocal(this.localName,r),this.setCookie("ARK_ID",e)))},r.prototype.setLocal=function(e,t){this.localObj=this.getLocal(),e===this.localName?this.localObj=t:this.localObj[e]=t;try{var r;n?(n.setItem(this.localName,p.encode(JSON.stringify(this.localObj))),a.setItem(this.localName,p.encode(JSON.stringify(this.localObj)))):"POSTDATA"!==e&&this.setCookie(this.cookieName,encodeURIComponent(p.encode(JSON.stringify(this.localObj)))),"POSTDATA"!==e&&!0===s.base.cross_subdomain&&(delete(r=p.toDeep(this.localObj)).POSTDATA,this.setCookie(this.cookieName,encodeURIComponent(p.encode(JSON.stringify(r)))))}catch(it){}},r.prototype.getLocal=function(e){try{var t=p.encode("{}");return n?(t=n.getItem(this.localName))||a.getItem(this.localName)&&(t=a.getItem(this.localName),n.setItem(this.localName,t)):t=(t=this.getCookie(this.cookieName))?decodeURIComponent(t):p.encode(JSON.stringify(this.localObj)),this.localObj=JSON.parse(p.decode(t)),e?this.localObj[e]:this.localObj}catch(it){return e?"":{}}},r.prototype.removeLocal=function(e){if(this.localObj=this.getLocal(),p.objHasKay(this.localObj,e)&&delete this.localObj[e],p.isEmptyObject(this.localObj))try{n&&(n.removeItem(this.localName),a.removeItem(this.localName)),this.removeCookie(this.cookieName)}catch(it){}else n&&(n.setItem(this.localName,p.encode(JSON.stringify(this.localObj))),a.setItem(this.localName,p.encode(JSON.stringify(this.localObj)))),"POSTDATA"!==e&&"ARK_ID"!==e&&!0===s.base.cross_subdomain&&(delete(e=p.toDeep(this.localObj)).POSTDATA,delete e.ARK_ID,this.setCookie(this.cookieName,p.encode(JSON.stringify(e))))},r.prototype.setSession=function(e,t){this.sessionObj=this.getSession(),this.sessionObj[e]=t;try{a?(a.setItem(this.sessionName,p.encode(JSON.stringify(this.sessionObj))),this.removeCookie(this.sessionName)):"POSTDATA"!==e&&this.setCookie(this.sessionName,p.encode(JSON.stringify(this.sessionObj)),"session")}catch(it){}},r.prototype.getSession=function(e){try{var t=p.encode("{}");return a?(t=a.getItem(this.sessionName)||p.encode("{}"),this.removeCookie(this.sessionName)):t=(t=this.getCookie(this.sessionName))||p.encode(JSON.stringify(this.sessionObj)),this.sessionObj=JSON.parse(p.decode(t)),e?this.sessionObj[e]:this.sessionObj}catch(it){return{}}},r.prototype.removeSession=function(e){if(this.sessionObj=this.getSession(),p.objHasKay(this.sessionObj,e)&&delete this.sessionObj[e],p.isEmptyObject(this.sessionObj))try{a&&a.removeItem(this.sessionName),this.removeCookie(this.sessionName)}catch(it){}else a&&a.setItem(this.sessionName,p.encode(JSON.stringify(this.sessionObj)))},r.prototype.setCookie=function(e,t,r){var n="."+p.getDomainFromUrl(s.base.cross_subdomain),a=n?"; domain="+n:"",n="";"session"!==r&&((r=new Date).setTime(r.getTime()+31536e6),n="; expires="+r.toGMTString()),document.cookie=e+"="+t+n+"; path=/"+a},r.prototype.getCookie=function(e){e=e||this.localName;var t=document.cookie;if("string"!=typeof t)return"";for(var r,n=e+"=",a=t.split(/[;&]/),o=0;o<a.length;o++){for(r=a[o];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(n))return r.substring(n.length,r.length)||""}},r.prototype.removeCookie=function(e,t,r){t="Boolean"===p.paramType(t)?t:s.base.cross_subdomain;var n,t="."+p.getDomainFromUrl(t),t=t?"; domain="+t:"";"session"!==r&&((n=new Date).setTime(n.getTime()-94608e6),n="; expires="+n.toGMTString()),document.cookie=e+"="+n+"; path=/"+t};var u=new r,o={utm_campaign_id:p.GetUrlParam("campaign_id"),utm_source:p.GetUrlParam("utm_source")||p.GetUrlParam("hmsr"),utm_medium:p.GetUrlParam("utm_medium")||p.GetUrlParam("hmpl"),utm_term:p.GetUrlParam("utm_term")||p.GetUrlParam("hmkw"),utm_content:p.GetUrlParam("utm_content")||p.GetUrlParam("hmci"),utm_campaign:p.GetUrlParam("utm_campaign")||p.GetUrlParam("hmcu")};function l(){o={utm_campaign_id:"",utm_source:"",utm_medium:"",utm_term:"",utm_content:"",utm_campaign:""}}function m(){this.sessionId=u.getLocal("SEESIONID")||this.setId(),this.sessionDate=u.getLocal("SEESIONDATE")||0}m.prototype.setId=function(){var e=+new Date;return this.sessionId=p.MD5("WC"+e.toString()+1e7*Math.random()),this.sessionDate=e,u.setLocal("SEESIONID",this.sessionId),u.setLocal("SEESIONDATE",this.sessionDate),this.sessionId},m.prototype.getId=function(){var e=new Date,t=e.getTime(),r=e.getTimezoneOffset(),e=new Date(t+60*r*1e3+288e5).getDate();this.sessionDate=u.getLocal("SEESIONDATE")||0;r=0===this.sessionDate?0:new Date(this.sessionDate+60*r*1e3+288e5).getDate();return this.sessionId&&this.sessionDate&&!(18e5<Number(t)-Number(this.sessionDate))&&e===r||(l(),this.setId()),this.sessionDate=t,u.setLocal("SEESIONDATE",t),this.sessionId=u.getLocal("SEESIONID")||this.setId(),this.sessionId};var y=new m;function d(){var e=u.getLocal("ARK_LOGINID")||u.getLocal("ARK_TRACKID")||u.getLocal("ARK_ID");return e&&"[object Object]"!==e||(e=g(),u.setLocal("ARK_ID",e)),u.setCookie("ARK_ID",h()||f()),e}function g(){var e=(new Date).getTime().toString()+(1e4*Math.random()).toString(),e="WC"+p.MD5(e.toString(),32)+p.MD5(e.toString(),32).slice(0,4);return u.setCookie("ARK_ID",e),e}function f(){var e=u.getLocal("ARK_ID");return e||(e=g(),u.setLocal("ARK_ID",e)),e}function h(){return u.getLocal("ARK_TRACKID")}var v=s.base;function T(){return v.appid}function b(){return v.$debug}function A(){return"/"!==v.uploadURL.charAt(v.uploadURL.length-1)&&(v.uploadURL+="/"),v.uploadURL}function S(){return+new Date+(u.getLocal("ANSSERVERTIME")?Number(u.getLocal("ANSSERVERTIME")):0)}function _(){return!!u.getLocal("ANSSERVERTIME")}function w(){return s.status.FnName}function $(){var e=!1;return(u.getLocal("ARK_LOGINID")||u.getLocal("ARK_TRACK_LOGIN"))&&(e=!0),e}var O="GMT"+p.clientTimeZone(),N=(navigator.language||navigator.browserLanguage).toLowerCase();function R(){return y.getId()}function L(){var e=u.getLocal("FRISTIME");return u.setLocal("FRISTIME",!1),e}function E(){var e=new Date,t=e.getFullYear(),r=(r=e.getMonth()+1)<10?"0"+r:r,e=e.getDate(),r=t+""+r+(e=e<10?"0"+e:e),e=u.getLocal("FRISTDAY");return!e||r===e}function j(){return h()||f()}var C=document.referrer||"";function F(e){C=e}function k(){var e=C;try{e=decodeURIComponent(C)}catch(it){}return e}function x(){return p.getDomainFromUrl(!1,C)}function I(){return document.title}function P(){return u.getSession("STARTUPTIME")||""}function U(){var e=window.location.href;try{e=decodeURIComponent(e)}catch(it){}return e}function D(){return v.$lib_version}function M(){return"Number"===p.paramType(Number(window.screen.width))?Number(window.screen.width):0}function K(){return"Number"===p.paramType(Number(window.screen.height))?Number(window.screen.height):0}var V=u.getSession("ARK_UTM")||"";function H(){return o.utm_campaign_id}function Y(){return o.utm_source}function J(){return o.utm_medium}function G(){return o.utm_term}function B(){return o.utm_content}function W(){return o.utm_campaign}o.utm_campaign||o.utm_source||o.utm_medium||o.utm_campaign_id||o.utm_term||o.utm_content?(V!==JSON.stringify(o)&&y.setId(),u.setSession("ARK_UTM",JSON.stringify(o))):(l(),u.removeSession("ARK_UTM"));var q={__proto__:null,getAppId:T,getId:d,getUploadURL:A,appkey:function(e){v.appid=e},debugMode:function(e){v.$debug=e},uploadURL:function(e){"/"!==e.charAt(e.length-1)&&(e+="/"),v.uploadURL=e},getDebugMode:b,nowDate:S,getXwhat:w,isLogin:$,timeZone:O,language:N,getSessionId:R,isFirstTime:L,isFirstDay:E,originalId:j,getReferrer:k,getReferrerDomain:x,getTitle:I,getUrl:U,getScreenWidth:M,getScreenHeight:K,startupTime:P,getLibVersion:D,utmCampaignId:H,utmSource:Y,utmMedium:J,utmTerm:G,utmContent:B,utmCampaign:W,timeCalibration:_,setReferrer:F},V={resetKeywords:["appid","$debug","uploadUrl"],uploadURL:{valueType:0,value:A,check:{value:["isString","nimLength","isUrl"],errorCode:"60007",successCode:"20008"}},appid:{valueType:0,value:T,check:{value:["isString","nimLength"],errorCode:"60006",successCode:"20006"}},hash:{check:{value:["isBoolean"],errorCode:"60003"}},auto:{check:{value:["isBoolean"],errorCode:"60003"}},autoProfile:{check:{value:["isBoolean"],errorCode:"60003"}},pageProperty:{check:{value:["isObject"],errorCode:"600016"}},xwho:{valueType:0,value:d,check:{value:["isString","nimLength"]}},xwhen:{valueType:0,value:S},xwhat:{valueType:0,value:w,check:{value:["isString","nimLength"]}},xcontext:{$lib:{valueType:1,value:"weCode"},$lib_version:{valueType:0,value:D,check:{value:["isString"],successCode:"20007"}},$platform:{valueType:1,value:"weCode"},$debug:{valueType:0,value:b,check:{value:["isNumber","isDebug"]}},$is_login:{valueType:0,value:$,check:{value:["isBoolean"]}},$screen_width:{valueType:0,value:M,check:{value:["isNumber"]}},$screen_height:{valueType:0,value:K,check:{value:["isNumber"]}},$time_zone:{valueType:1,value:O},$language:{valueType:1,value:N},$session_id:{valueType:0,value:R},$is_first_time:{valueType:0,value:L},$is_first_day:{valueType:0,value:E},$referrer:{valueType:0,value:k},$referrer_domain:{valueType:0,value:x},$title:{valueType:0,value:I},$url:{valueType:0,value:U},$startup_time:{valueType:0,value:P},$original_id:{valueType:0,value:j},$utm_campaign_id:{valueType:0,value:H},$utm_source:{valueType:0,value:Y},$utm_medium:{valueType:0,value:J},$utm_term:{valueType:0,value:G},$utm_content:{valueType:0,value:B},$utm_campaign:{valueType:0,value:W},$is_time_calibrated:{valueType:0,value:_}},xcontextCommonRule:{check:{key:["isString","length99","notSpecialCharacters","keywords"],value:["notObject","isArrayString","length255"]}},$track:{check:{key:["isString","notSpecialCharacters","length99"]}},$alias:{check:{key:["isString","keyLength255"]}},$profile_increment:{check:{key:["isString","length99","notSpecialCharacters"],value:["isNumber"]}},$profile_unset:{check:{key:["isString","length99","notSpecialCharacters"]}},$pageview:{check:{key:["isString","keyLength255"]}}};var X={ele:"",click_x:0,click_y:0,clickEle:""};function z(){return X.ele.tagName.toLowerCase()}function Z(){return X.ele&&null!==X.ele.getAttribute("data-ark-click")}function Q(e){if(!e||"Array"===p.paramType(e)&&0===e.length||"String"===p.paramType(e)&&""===e)return!1;var t=X.ele;if("String"===p.paramType(e)){var r=t.tagName.toLowerCase(),n="String"===p.paramType(t.className)?"."+t.className.split(" ").join("."):"",a=t.id?"#"+t.id:"";if(r===e.toLowerCase()||n===e||a===e||r+n===e||r+a===e||a+n===e||r+a+n===e)return!0}else if("Array"===p.paramType(e)){for(var o=0;o<e.length;o++)if(!0===Q(e[o]))return!0}else{if("Function"===p.paramType(e))return e.call(e,t)||!1;if("object"===i(e)&&e===t)return!0}return!1}function ee(){for(var e=X.ele;null!=X.ele;)if(1===X.ele.nodeType){if("Function"===p.paramType(X.ele.onclick)||1===te()||Z()||Q(s.base.trackList)){e=X.ele;break}X.ele=X.ele.parentNode}else X.ele=X.ele.parentNode;X.ele=e}function te(){var e=z();if(-1<["a","button","input","select","textarea","svg"].indexOf(e)||Z()||Q(s.base.trackList)){if("svg"===e&&X.ele.children&&0<X.ele.children.length){for(var t=0,r=X.ele.children,n=0;n<r.length;n++)"use"===r[n].tagName.toLowerCase()&&(r[n].getAttribute("xlink:href")||Z()||Q(s.base.trackList))&&(t=1);return t}return 1}return 0}var re={};function ne(e){var t;(t=e||window.event).touches&&0<t.touches.length&&(t=t.touches[0]);var r=t.target||t.srcElement;if(!(p.checkTypeList(re.autoClickBlackList,r)||re.autoClickWhiteList&&!p.checkTypeList(re.autoClickWhiteList,r))&&(X.ele=r,ee(),1===te())){var n=re.user_click_property,e={};if("Object"===p.paramType(n)){for(var a in n)"Function"===p.paramType(n[a])&&(n[a]=n[a].call(n[a],r));e=n}else"Function"===p.paramType(n)&&(e=n.call(n,r));var o=X.ele.getAttribute("data-ark-click")||{};if("String"===p.paramType(o))try{o=JSON.parse(o)}catch(t){}"Object"!==p.paramType(o)&&(o={}),"Object"===p.paramType(e)&&(o=p.objMerge(e,o)),window.AnalysysAgent.freeApi("$user_click",o)}}for(var O={__proto__:null,fieldRules:{xcontext:{$page_width:{valueType:0,value:function(){return document.documentElement.scrollWidth}},$page_height:{valueType:0,value:function(){return document.documentElement.scrollHeight}},$element_path:{valueType:0,value:function(){return function(e){for(var t=[],r=e;null!=r;){var n=0;if(r.parentNode){var a=r.parentNode.children;if(a)for(var o=0;o<a.length;o++)a[o]===r&&(n=o)}var i=r.tagName;if(i){i=i.toLowerCase();var s=r.id?"#"+r.id:"",u=r.className&&"String"===p.paramType(r.className)?r.className.split(" "):[];if(0<u.length){for(var c="",l=0;l<u.length;l++)u[l]&&u[l].indexOf("ARK")<0&&(c+="."+u[l]);t.push(i+s+c+"|"+n)}else t.push(i+s+"|"+n);r=r.parentNode}else r=r.parentNode}return t.join("<")}(X.ele)}},$url_path:{valueType:0,value:function(){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.hash;try{e=decodeURIComponent(e)}catch(it){}return e}},$element_type:{valueType:0,value:z},$element_clickable:{valueType:0,value:te},$element_content:{valueType:0,value:function(){return function(e,t){var r="";if("input"===e.tagName.toLowerCase()?r=e.value||"":"img"===e.tagName.toLowerCase()?r=e.getAttribute("alt")||e.getAttribute("title")||"":"a"===e.tagName.toLowerCase()&&(r=e.getAttribute("title")||""),!r)for(var n=e.childNodes,a=0;a<n.length;a++)3===n[a].nodeType&&(r+=n[a].nodeValue);return r=r&&"String"===p.paramType(r)?r.replace(/[\r\n]/g," ").replace(/[ ]+/g," "):"","input"===e.tagName.toLowerCase()&&!0!==t?"":r=p.trim(r)}(X.ele)}},$element_id:{valueType:0,value:function(){return X.ele.id||X.ele.getAttribute("id")||""}},$element_name:{valueType:0,value:function(){return X.ele.getAttribute("name")||""}},$element_target_url:{valueType:0,value:function(){var e=X.ele.getAttribute("href");if(e&&e.indexOf("javascript:")<0){try{e=decodeURIComponent(e)}catch(it){}return e}return""}},$element_class_name:{valueType:0,value:function(){var e=X.ele.getAttribute("class")||"";if(e){for(var t=e.split(" "),r=[],n=0;n<t.length;n++)""!==t[n]&&r.push(t[n]);return e="."+r.join(".")}return""}}}},fieldTemplate:{$user_click:{xcontext:["$url_path","$url","$title","$is_first_day","$session_id","$is_time_calibrated","$element_type","$element_path","$element_content","$element_id","$element_name","$element_target_url","$element_class_name"]}},lifecycle:{AnalysysAgent:{init:function(e){return!0===(re=e).autoTrack&&p.addEvent(document,"click",ne,!0),e}}}},N={xcontext:{$brand:{valueType:0,value:function(){return s.system.$brand}},$model:{valueType:0,value:function(){return s.system.$model}},$os:{valueType:0,value:function(){return s.system.$os}},$os_version:{valueType:0,value:function(){return s.system.$os_version}},$network:{valueType:0,value:function(){return s.system.$network}}}},ae={},oe=["$startup","$track","$pageview","$user_click"],ie={xcontext:["$brand","$model","$os","$os_version","$network"]},se=0;se<oe.length;se++)ae[oe[se]]=ie;for(var ue=[{__proto__:null,fieldRules:N,fieldTemplate:ae},O],ce=V,le=e,pe={},me=0;me<ue.length;me++)ue[me].fieldRules&&(ce=p.objMerge(ce,ue[me].fieldRules)),ue[me].fieldTemplate&&(le=p.objMerge(le,ue[me].fieldTemplate)),ue[me].lifecycle&&(pe=p.fnMerge(pe,ue[me].lifecycle));for(var ye,de,ge={},fe={},he=le.base,ve=he.outer,Te=0;Te<ve.length;Te++)he[ve[Te]]?fe[ve[Te]]=p.toObj(he[ve[Te]]):fe[ve[Te]]="";for(ye in le)"base"!==ye&&(de=p.toDeepObj(le[ye]),ge[ye+"base"]=de,ge[ye]=p.objMerge(fe,de));function be(e){return ge[e]||ge.commonTemp}ge.commonTemp=fe;var Ae={common:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",60001:"{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\n",60002:"{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60003:"{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60004:"{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",60005:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",60006:"Please set appkey first.",60007:"Please set uploadURL first.",60008:"Send message failed.",60009:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !",600010:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !",600011:"{FN}:[{KEY}] does not conform to naming rules!",600012:"{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}",600013:"{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600016:"{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600017:"{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !",600018:"{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}",600019:"{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !",600020:"{FN}:Property value invalid of key[{KEY}], support type: Boolean/Array/String/Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}"},Se={common:"",20001:"Send message success",20002:"{FN}: set success ({VALUE})",20003:"{FN}:({VALUE}) delete success",20004:"{FN}:clear success",20005:"{FN}:reset success",20006:"set appkey success. current appkey : {VALUE}",20007:"Init Analysys weCode sdk success, version : {VALUE}",20008:"set uploadURL success. current uploadURL : {VALUE}",20009:"{FN}:[{KEY}] : get failed",20010:"{FN}:[{KEY}] : get success. ({VALUE})",20011:"{FN}:({VALUE}) delete failed"};function _e(e){var t,r,n,a;1!==s.base.$debug&&2!==s.base.$debug||(n=(a=s.status).successCode,t=a.FnName,r=a.key,a=a.value,n=Se[n]||Se.common,"String"===p.paramType(r)&&30<r.length&&(r=p.stringSlice(r,30)+"..."),"String"===p.paramType(t)&&30<t.length&&(t=p.stringSlice(t,30)+"..."),a=n.replace("{FN}",t).replace("{KEY}",r).replace("{VALUE}",a),e&&(a=e),a&&console.log(a))}function we(){var e,t,r,n,a;1!==s.base.$debug&&2!==s.base.$debug||(a=(n=s.status).errorCode,e=n.FnName,t=n.key,r=n.value,"Object"===p.paramType(r)&&(r=JSON.stringify(r)),n=p.paramType(r),"600018"!==a||t||(a="600011"),"60005"!==a||t||(a="600017"),("600017"===a||"600019"===a||"60009"===a||"600010"===a||"60005"===a)&&"String"===p.paramType(r)&&r.length&&30<r.length&&(r=p.stringSlice(r,30)+"..."),"String"===p.paramType(t)&&30<t.length&&(t=p.stringSlice(t,30)+"..."),"String"===p.paramType(e)&&30<e.length&&(e=p.stringSlice(e,30)+"..."),n=(Ae[a]||Ae.common).replace("{FN}",e).replace("{KEY}",t).replace("{VALUE}",r).replace("{VALUETYPE}",n),console.warn(n),pe.errorLog&&pe.errorLog.init&&"60008"!==a&&(a=s.status.FnName,pe.errorLog.init(n),s.status.FnName=a))}var $e=function $e(){};$e.prototype=p,$e.prototype.isString=function(e){return s.status.errorCode="60001","String"===p.paramType(e)},$e.prototype.isNumber=function(e){return s.status.errorCode="60002","Number"===p.paramType(e)},$e.prototype.isBoolean=function(e){return s.status.errorCode="60003","Boolean"===p.paramType(e)},$e.prototype.isObject=function(e){return"Object"===this.paramType(e)},$e.prototype.lengthRule=function(e,t,r){this.isNumber(r)||(r=Infinity);var n=!0;return this.isNumber(t)&&e.length&&e.length>t&&e.length<r+1||(n=!(s.status.errorCode="60005")),n},$e.prototype.nimLength=function(e){return this.lengthRule(e,0)},$e.prototype.length99=function(e){e=this.lengthRule(e,0,99);return e||(s.status.errorCode="600010"),e},$e.prototype.length125=function(e){e=this.lengthRule(e,0,125);return e||(s.status.errorCode="60009"),e},$e.prototype.length255=function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return!(s.status.errorCode="60005");"String"!==this.paramType(e)&&(e=e.toString());e=this.lengthRule(e,0,255);return e||(s.status.errorCode="600019"),e},$e.prototype.keyLength255=function(e){e=this.length255(e);return e||(s.status.errorCode="600017"),e},$e.prototype.isUrl=function(e){return!0===new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(e)||!(s.status.errorCode="60006")},$e.prototype.isDebug=function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)},$e.prototype.notObject=function(e){e=!this.isObject(e);return e||(s.status.errorCode="600020"),e},$e.prototype.notSpecialCharacters=function(e){return!(new RegExp("[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]","gi").test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||!(s.status.errorCode="600011")},$e.prototype.isArrayString=function(e){if("Array"===this.paramType(e))for(var t=0;t<e.length;t++){if("String"!==this.paramType(e[t]))return!(s.status.errorCode="600013");if(!this.length255(e[t]))return e[t]&&500<e[t].length&&(e[t]=p.stringSlice(e[t],499)+"$"),s.status.value=e[t],!1}return!0},$e.prototype.keywords=function(e){return!(-1<s.keywords.indexOf(e))||!(s.status.errorCode="600012")};var Oe=new $e;function Ne(e,t){for(var r=0;r<t.length;r++)if(!Oe[t[r]](e))return!1;return!0}function Re(e,t,r){var n=r.check,a=!0;if(!n)return a;r=n.key,n=n.value||ce.xcontextCommonRule.value;return r&&(s.status.code=200,a=Ne(e,r),s.status.key=e,a||(s.status.code=400,we())),n&&(s.status.code=200,a=Ne(t,n),"Array"!==p.paramType(t)&&(s.status.value=t),a||(s.status.code=400,we())),a}function Le(){s.status={code:200,FnName:s.status.FnName,key:"",value:"",errorCode:"",successCode:""}}function Ee(e,t){var r,n=t||ce,a={};for(r in e){var o,i=e[r],s=n[r];s&&(o="","Object"===p.paramType(i)?(i=Ee(i,s),a[r]=i):p.objHasKay(s,"valueType")&&(0===s.valueType&&(o=s.value(),"String"===p.paramType(o)&&500<o.length?a[r]=p.stringSlice(o,499)+"$":a[r]=o),1===s.valueType&&(o=s.value,"String"===p.paramType(o)&&500<o.length?a[r]=p.stringSlice(o,499)+"$":a[r]=o)))}return a}function je(e){if(!(e=e||!1)){var t,r=s.base;for(t in r)"Object"!==p.paramType(r[t])&&("$debug"!==t&&"appid"!==t&&"uploadURL"!==t||(u.getLocal("ANS"+t.toUpperCase())!==r[t]&&(e=!0),e&&u.setLocal("ANS"+t.toUpperCase(),r[t])))}return e&&(u.removeLocal("ARK_LOGINID"),u.removeLocal("ARK_TRACK_LOGIN"),u.removeLocal("ARK_TRACKID"),u.removeLocal("ARKSUPER"),u.removeSession("STARTUP"),u.setLocal("FRISTDAY",p.format(new Date,"yyyyMMdd")),u.setLocal("FRISTIME",!0),u.removeLocal("POSTDATA"),u.removeLocal("ANSSERVERTIME"),u.removeLocal("ARKFRISTPROFILE")),e}function Ce(e,t,r){Le();var n=ce[t]||ce.xcontextCommonRule;if("Object"!==p.paramType(e)||!0===r){r=n.check.key,r=Ne(p.trim(e),r);if(s.status.key=e,!r)return we(),!1}else for(var a in e)Re(a,e[a],n)||"600019"===s.status.errorCode&&"String"===p.paramType(e[a])&&500<e[a].length&&(e[a]=p.stringSlice(e[a],499)+"$");return!0}function Fe(e){if("String"!==p.paramType(e))return"Object"===p.paramType(e)?e:{code:200};-1<e.indexOf("\n")&&(e=e.replace(/[\r\n]/g,""));try{return JSON.parse(e)}catch(it){}try{return window.AnalysysModule.zipInflate(e)}catch(it){}return"H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA="===e?{code:200}:"H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA="===e?{code:500}:"H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=="===e?{code:420}:{code:200}}function ke(){var e=null;if(window.XDomainRequest)return new window.XDomainRequest;if(window.XMLHttpRequest)e=new window.XMLHttpRequest;else try{e=new window.ActiveXObject("Microsoft.XMLHTTP")}catch(it){try{e=new window.ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new window.XMLHttpRequest}}return e}function xe(e){var r,n,t,a=!1,o=new ke;o.onload=function(){a||(a=!0,e.success(Fe(o.responseText),o))},o.onerror=function(){a||(a=!0,e.error(Fe(o.responseText),o))},o.onreadystatechange=(r=o,n=e,function(){if(4===r.readyState){try{var e,t;(-1<r.getAllResponseHeaders().indexOf("Date")||-1<r.getAllResponseHeaders().indexOf("date"))&&(e=+new Date,(t=r.getResponseHeader("Date")||r.getResponseHeader("date"))&&!0===s.base.allowTimeCheck?u.setLocal("ANSSERVERTIME",+new Date(t)-e):u.setLocal("ANSSERVERTIME",0))}catch(it){}if(200<=r.status&&r.status<300||304===r.status){if(a)return;a=!0,n.success(Fe(r.responseText),r)}else{if(a)return;a=!0,n.error()}r.onreadystatechange=null,r.onload=null}});try{o.open(e.type,e.url,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var i=s.base.sendDataTimeout;"GET"===e.type?(i=s.base.getDataTimeout,o.send(null)):o.send(e.data),"Number"===p.paramType(i)&&("Number"===p.paramType(o.timeout)?o.timeout=i:(t=o,setTimeout(function(){t.abort()},i)))}catch(it){}}function Ie(){this.url="",this.data="",this.type="GET",this.success=function(){},this.error=function(){}}Ie.prototype.get=function(e){var t,r=[];for(t in e.data)r.push(t+"="+encodeURIComponent(e.data[t]));var n=-1<e.url.indexOf("?")?e.url+"&"+r.join("&"):e.url+"?"+r.join("&");this.url=n,this.data=e.data,this.type="GET",this.success=e.success||function(){},this.error=e.error||function(){},xe(this)};var Pe=!0,Ue="img",De=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function Me(e,t){"img"!==Ue&&(Pe=!1);var r=e;"Array"===p.paramType(e)&&(e=function o(e){if("Array"===p.paramType(e))for(var t=0;t<e.length;t++)e[t]=o(e[t]);if("Object"===p.paramType(e))for(var r in e){var n=e[r];e[r]=o(n)}if("String"!==p.paramType(e))return e;var a=e.replace(De,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)});return"Sting"!==p.paramType(a)?e:a}(e),r=JSON.stringify(e)),window.AnalysysModal&&"function"==typeof window.AnalysysModal&&window.AnalysysModal(e);var n,a=function a(){Pe=!0,s.status.errorCode="60008",we(),"Function"===p.paramType(t)&&t.call(t)},i=function i(e){Pe=!0;var t=u.getLocal("POSTDATA")||[];if(p.isEmptyObject(t)&&(t=[],u.removeLocal("POSTDATA")),0!==t.length){for(var r=[],n=0;n<t.length;n++){for(var a=!1,o=0;o<e.length;o++)e[o].xwhen!==t[n].xwhen&&e[o].xwhen&&t[n].xwhen||(a=!0);!1!==a||"Object"!==p.paramType(t[n])||p.isEmptyObject(t[n])||r.push(t[n])}0<r.length&&"img"!==Ue?(u.setLocal("POSTDATA",r),Me(r)):u.removeLocal("POSTDATA")}else u.removeLocal("POSTDATA")},e=(n=e,function(e){200===e.code||400===e.code||4200===e.code?(s.status.successCode="20001",_e(),i(n),"Function"===p.paramType(t)&&t.call(t)):a()}),e={url:s.base.uploadURL+"up?appid="+s.base.appid,data:r,success:e,error:a};_e("Send message to server: "+s.base.uploadURL+"up?appid="+s.base.appid+"\ndata:"+r),pe.upload&&pe.upload.init?e=pe.upload.init(e):window.AnalysysModule&&"Object"===p.paramType(window.AnalysysModule)&&"Function"===p.paramType(window.AnalysysModule.uploadData)&&(window.AnalysysModule.encryptInit(s.base),e=window.AnalysysModule.uploadData(e)),"img"!==Ue?"post"===Ue||"send"!==Ue?(new Ie).post(e):Ke(e,"send"):Ke(e,"img")}function Ke(e,t){if("send"===t&&navigator.sendBeacon)navigator.sendBeacon(e.url,e.data)&&e.success({code:200});else if("send"!==t||navigator.sendBeacon||(t="img"),e.data=p.encode(e.data),e.data=function(e){var t,r={data:e.data,send_type:""},n=[];for(t in r)n.push(t+"="+encodeURIComponent(r[t]));return e=(e=-1<e.url.indexOf("?")?e.url+"&"+n.join("&"):e.url+"?"+n.join("&")).replace(s.base.uploadURL,"/"),e=(e=p.MD5(e,32).split(""))[2]+""+e[0]+e[4],r.send_type=e,r}(e),"img"===t){var r,n=[];for(r in e.data)n.push(r+"="+encodeURIComponent(e.data[r]));var t=-1<e.url.indexOf("?")?e.url+"&"+n.join("&"):e.url+"?"+n.join("&"),a=document.createElement("img"),o=null;a.width=1,a.height=1,a.onerror=a.onload=function(){clearTimeout(o),e.success({code:200}),this.src="",this.onload=null,this.onerror=null,this.onabort=null},a.onabort=function(){this.src="",this.onload=null,this.onerror=null,this.onabort=null,e.error()},"Number"===p.paramType(s.base.sendDataTimeout)&&(o=setTimeout(function(){a.onabort()},s.base.sendDataTimeout)),a.src=t}}function Ve(e){var t=[];if("Array"===p.paramType(e)&&0<e.length)for(var r=0;r<e.length;r++){var n=Ve(e[r]);0<n.length&&t.push.apply(t,n)}return"Object"===p.paramType(e)&&!p.isEmptyObject(e)&&function(e){if("Object"===p.paramType(e)&&!p.isEmptyObject(e)){for(var t=!0,r=0;r<s.baseJson.length;r++){var n=s.baseJson[r];"xwhat"!==n&&(!e[n]||"Object"===p.paramType(e[n])&&p.isEmptyObject(e[n]))&&(t=!1)}return t}}(e)&&t.push(e),t}function He(e,t){s.base.sendType&&(Ue=s.base.sendType),"/"!==s.base.uploadURL.charAt(s.base.uploadURL.length-1)&&(s.base.uploadURL+="/");var r,n=[];if("img"===Ue?n=Ve(e):(0===(r=Ve(r=u.getLocal("POSTDATA")||[])).length&&u.removeLocal("POSTDATA"),(n=r).length<500?n.push.apply(n,Ve(e)):n=Ve(e),u.setLocal("POSTDATA",n)),!1!==Pe||"img"===Ue){if(0<n.length)if("img"===Ue)for(var a=0;a<n.length;a++)0===a?Me([n[a]],t):Me([n[a]]);else Me(n,t)}else"Function"===p.paramType(t)&&t.call(t)}var Ye=!(Ie.prototype.post=function(e){this.url=e.url,this.data=e.data,this.type="POST",this.success=e.success||function(){},this.error=e.error||function(){},xe(this)}),Je=window.location.href;function Ge(e,t,r){He(Be(e,t),r)}function Be(e,t){var r=e,n=t;if(window.AnalysysModule&&window.AnalysysModule.pageClose&&(!0===Ye?window.AnalysysModule.pageClose.pageEndTrack():Ye=!0,"String"===p.paramType(r)?window.AnalysysModule.pageClose.createTime(+new Date,r):window.AnalysysModule.pageClose.createTime(+new Date)),!(p.checkTypeList(s.base.pageViewBlackList)||s.base.pageViewWhiteList&&!p.checkTypeList(s.base.pageViewWhiteList))){s.status.FnName="$pageview",Le();e={};"String"===p.paramType(r)?Ce(e={$title:r}):"Object"===p.paramType(r)?(n=r,r=""):"Function"===p.paramType(r)&&(r=n=""),"Function"===p.paramType(n)&&(n="");t={};if("Object"===p.paramType(n)){for(var a in n)"Function"===p.paramType(n[a])&&(n[a]=n[a].call(n[a]));!1===s.base.isHybrid&&Ce(n),t={xcontext:n||{}}}r=u.getLocal("ARKSUPER")||{};!0===s.base.isHybrid&&(r={});t=p.objMerge({xcontext:r},t),t=p.objMerge(t,{xcontext:e}),e=be("$pageview"),e=p.delEmpty(Ee(e));return F(Je),p.objMerge(e,t)}}function We(e,t,r){s.status.FnName="$profile_set_once",Le(),"Object"===p.paramType(e)&&"Function"===p.paramType(t)?(r=t,t=""):"String"===p.paramType(e)&&"Function"===p.paramType(t)&&(t=t.call(t));var n,a=p.toObj(e,t);for(n in a)"Function"===p.paramType(a[n])&&(a[n]=a[n].call(a[n]));Ce(a,"$profile_set_once");t=be("$profile_set_once"),t=p.delEmpty(Ee(t));He(p.objMerge(t,{xcontext:a}),r)}function qe(e){s.status.FnName="$clearSuperProperties",Le(),u.setLocal("ARKSUPER",{}),s.status.successCode="20004",_e(),"Function"===p.paramType(e)&&e.call(e)}var Xe={__proto__:null,pageView:Ge,profileSet:function(e,t,r){s.status.FnName="$profile_set",Le(),"Object"===p.paramType(e)&&"Function"===p.paramType(t)?(r=t,t=""):"String"===p.paramType(e)&&"Function"===p.paramType(t)&&(t=t.call(t));var n,a=p.toObj(e,t);for(n in a)"Function"===p.paramType(a[n])&&(a[n]=a[n].call(a[n]));Ce(a,"$profile_set"),t=be("$profile_set"),t=p.delEmpty(Ee(t)),He(p.objMerge(t,{xcontext:a}),r)},profileSetOnce:We,profileIncrement:function(e,t,r){s.status.FnName="$profile_increment",Le(),"Object"===p.paramType(e)&&"Function"===p.paramType(t)?(r=t,t=""):"String"===p.paramType(e)&&"Function"===p.paramType(t)&&(t=t.call(t));var n,a=p.toObj(e,t);for(n in a)"Function"===p.paramType(a[n])&&(a[n]=a[n].call(a[n]));Ce(a,"$profile_increment"),t=be("$profile_increment"),t=p.delEmpty(Ee(t)),He(p.objMerge(t,{xcontext:a}),r)},profileAppend:function(e,t,r){s.status.FnName="$profile_append",Le(),"Object"===p.paramType(e)&&"Function"===p.paramType(t)?(r=t,t=""):"String"===p.paramType(e)&&"Function"===p.paramType(t)&&(t=t.call(t));var n,a=p.toObj(e,t);for(n in a)"Function"===p.paramType(a[n])&&(a[n]=a[n].call(a[n]));Ce(a,"$profile_append"),t=be("$profile_append"),t=p.delEmpty(Ee(t)),He(p.objMerge(t,{xcontext:a}),r)},profileUnset:function(e,t){s.status.FnName="$profile_unset",Le(),"Function"===p.paramType(e)&&(e=e.call(e)),Ce(e,"$profile_unset",e);var r=p.toObj(e,"");Ce(r,"$profile_unset"),e=Ee(be("$profile_unset")),He(p.objMerge(e,{xcontext:r}),t)},profileDelete:function(e){s.status.FnName="$profile_delete",Le(),He(Ee(be("$profile_delete")),e)},alias:function(e,t){var r;s.status.FnName="$alias",Le(),Ce(e,"$alias",!0)&&(u.setLocal("ARK_LOGINID",e),r=Ee(be("$alias")),He(p.delEmpty(r),t),!0===s.base.autoProfile&&(e=Ee(be(s.status.FnName="$profile_set_once")),t={$first_visit_time:r=u.getLocal("ARKFRISTPROFILE")||p.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},t=p.objMerge(e,{xcontext:t}),He(p.delEmpty(t)),u.setLocal("ARKFRISTPROFILE",r)))},identify:function(e,t,r){s.status.FnName="$identify",Le(),Ce(e,"$alias",!0)&&("Boolean"===p.paramType(t)&&!0===t?u.setLocal("ARK_TRACK_LOGIN",!0):"Function"===p.paramType(t)&&(r=t),u.setLocal("ARK_TRACKID",e),u.setCookie("ARK_ID",e),s.status.successCode="20002",s.status.value=e,_e(),"Function"===p.paramType(r)&&r.call(r),window.AnalysysModal&&"function"==typeof window.AnalysysModal&&window.AnalysysModal([{xwhat:"$identify",xwho:e}]))},track:function(e,t,r){s.status.FnName=e||"$track",Le(),Ce(e,"$track",!0),s.status.FnName=e;var n={};if("Function"===p.paramType(t)&&(r=t,t={}),"Object"===p.paramType(t)){for(var a in t)"Function"===p.paramType(t[a])&&(t[a]=t[a].call(t[a]));Ce(t),n={xcontext:t}}e=u.getLocal("ARKSUPER")||{},e=p.objMerge({xcontext:e},n),(n=Ee(be("$track"))).xcontext=p.delEmpty(n.xcontext),He(p.objMerge(n,e),r)},registerSuperProperty:function(e,t,r){s.status.FnName="$registerSuperProperty",Le(),"Object"===p.paramType(e)&&"Function"===p.paramType(t)?(r=t,t=""):"String"===p.paramType(e)&&"Function"===p.paramType(t)&&(t=t.call(t));var n,a=p.toObj(e,t);for(n in a)"Function"===p.paramType(a[n])&&(a[n]=a[n].call(a[n]));Ce(a,"$registerSuperProperty"),t=u.getLocal("ARKSUPER")||{},t=p.objMerge(t,a),u.setLocal("ARKSUPER",t),s.status.successCode="20002",s.status.value=JSON.stringify(a),_e(),"Function"===p.paramType(r)&&r.call(r)},registerSuperProperties:function(e,t,r){s.status.FnName="$registerSuperProperties",Le(),"Object"===p.paramType(e)&&"Function"===p.paramType(t)?(r=t,t=""):"String"===p.paramType(e)&&"Function"===p.paramType(t)&&(t=t.call(t));var n,a=p.toObj(e,t);for(n in a)"Function"===p.paramType(a[n])&&(a[n]=a[n].call(a[n]));Ce(a,"$registerSuperProperties"),t=u.getLocal("ARKSUPER")||{},t=p.objMerge(t,a),u.setLocal("ARKSUPER",t),s.status.successCode="20002",s.status.value=JSON.stringify(a),_e(),"Function"===p.paramType(r)&&r.call(r)},getSuperProperty:function(e,t){s.status.FnName="$getSuperProperty",Le(),Ce(e,"$getSuperProperty",!0);var r=u.getLocal("ARKSUPER")||{},n=r[e];return!{}.hasOwnProperty.call(r,e)?(s.status.successCode="20009",n=""):(s.status.successCode="20010",s.status.value=n),s.status.key=e,_e(),"Function"===p.paramType(t)&&t.call(t,n),n},getSuperProperties:function(e){s.status.FnName="$getSuperProperties",Le();var t=u.getLocal("ARKSUPER")||{};return s.status.successCode="20010",s.status.value=JSON.stringify(t),_e(),"Function"===p.paramType(e)&&e.call(e,t),t},unRegisterSuperProperty:function(e,t){s.status.FnName="$unregisterSuperProperty",Le(),Ce(e,"$unregisterSuperProperty",!0);var r=u.getLocal("ARKSUPER")||{};Object.prototype.hasOwnProperty.call(r,e)?(delete r[e],u.setLocal("ARKSUPER",r),s.status.successCode="20003"):s.status.successCode="20011",s.status.value=e,_e(),"Function"===p.paramType(t)&&t.call(t)},clearSuperProperties:qe,reset:function(e){Le(),u.removeLocal("ARK_ID"),qe(),je(!0),y.setId(),!0===s.base.autoProfile?We({$reset_time:p.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS")},e):"Function"===p.paramType(e)&&e.call(e),s.status.FnName="$reset",s.status.successCode="20005",_e()},freeApi:function(e,t){s.status.FnName=e,Le();var r=be(e);r&&(e=Ee(r),r=u.getLocal("ARKSUPER")||{},"Object"===p.paramType(t)&&(r=p.objMerge(r,t)),e=p.objMerge({xcontext:r},e),He(p.delEmpty(e)))},getDistinctId:function(e){var t=h()||f();return"Function"===p.paramType(e)&&e.call(e,t),t},getPresetProperties:function(e){s.status.FnName="$getPresetProperties",Le();var t=Ee(be("$getPresetProperties"));return t.xcontext.$first_visit_time=u.getLocal("ARKFRISTPROFILE")||"",delete t.xcontext.$is_login,t=p.delEmpty(t.xcontext),"Function"===p.paramType(e)&&e.call(e,t),t}};function ze(){var e,t,r,n,a,o,i=[];!function(){for(var e in s.base){Le(),s.status.key=e;var t=ce[e];if("$debug"===e&&(t=ce.xcontext[e]),"$lib_version"===e&&(t=ce.xcontext[e]),t&&!Re(e,s.base[e],t))return void(s.base[e]="");_e()}return 1}()?we():(a=u.getLocal("ARKSUPER")||{},!1===(t=u.getSession("STARTUP")||!1,r=u.getCookie("ARK_STARTUP"),""!==document.referrer&&r&&!0===s.base.cross_subdomain&&(r=(e=JSON.parse(p.decode(decodeURIComponent(r)))).STARTUP,e=e.STARTUPTIME,u.setSession("STARTUP",r),u.setSession("STARTUPTIME",e),t=u.getSession("STARTUP")||!1),!1===t&&(e=p.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),u.setSession("STARTUP",!0),u.setSession("STARTUPTIME",e),y.setId(),!0===s.base.cross_subdomain&&u.setCookie("ARK_STARTUP",encodeURIComponent(p.encode(JSON.stringify({STARTUP:!0,STARTUPTIME:e}))),"session")),t)&&(t=!0,(p.checkTypeList(s.base.startUpBlackList)||s.base.startUpWhiteList&&!p.checkTypeList(s.base.startUpWhiteList))&&(t=!1),!0===t&&(n=Ee(be(s.status.FnName="$startup")),n=p.objMerge(n,{xcontext:a}),i.push(p.delEmpty(n)))),a=u.getLocal("ARKFRISTPROFILE")||!1,!0!==s.base.autoProfile||a||(n=Ee(be(s.status.FnName="$profile_set_once")),a={$first_visit_time:o=u.getLocal("ARKFRISTPROFILE")||p.format(new Date,"yyyy-MM-dd hh:mm:ss.SSS"),$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},a=p.objMerge(n,{xcontext:a}),i.push(p.delEmpty(a)),u.setLocal("ARKFRISTPROFILE",o)),!0===s.base.auto&&(o=Be(s.base.pageProperty),i.push(o),!0!==s.base.hash&&!0!==s.base.singlePage||p.changeHash(function(){Je!==window.location.href&&(Je=window.location.href,Ge())})),0<i.length&&He(i))}function Ze(e){var t=e.toLowerCase();return"ios"===t?"iOS":"android"===t?"Android":e}var Qe=!1;function et(e){if(!1!==Qe)return e.call(e);Promise.all([new Promise(function(r){window.HWH5?window.HWH5.getDeviceInfo().then(function(e){var t=Ze(e.osType);s.system.$os=Ze(e.osType),"iOS"===t?(s.system.$brand="Apple",s.system.$os_version=e.osVersion):"Android"===t?-1<(t=e.deviceModel||"").indexOf("_")&&(t=t.split("_"),s.system.$model=t[1]||"",s.system.$os_version=t[2]||""):(s.system.$brand=e.deviceModel||"",s.system.$os=Ze(e.osType),s.system.$os_version=e.osVersion),r()})["catch"](function(){r()}):r({})}),new Promise(function(t){window.HWH5?window.HWH5.getNetworkType().then(function(e){e=e.type;"Number"===p.paramType(e)&&(e=""+e),s.system.$network=e,t()})["catch"](function(){t({})}):t({})})]).then(function(){Qe=!0,e.call(e)})["catch"](function(){Qe=!0,e.call(e)})}window.AnalysysAgent=window.AnalysysAgent||{};var tt=window.AnalysysAgent,rt=tt.config||{},nt=[];if(!0!==tt.isInit)for(var at in Xe)tt[at]=function(t){return function(){var e=arguments;if(-1<t.indexOf("get"))return Xe[t].apply(Xe[t],e);nt.push([t,arguments])}}(at);function ot(){for(var e in tt.isInit=!0,Xe)tt[e]=Xe[e];for(var t in rt)"Function"===p.paramType(q[t])?q[t](rt[t]):s.base[t]=rt[t];tt.config=p.objMerge(s.base,rt),s.base=tt.config,je();for(var r=0;r<nt.length;r++){var n=nt[r];p.objHasKay(Xe,n[0])&&("identify"===n[0]||"alias"===n[0]||-1<n[0].indexOf("Super"))&&Xe[n[0]].apply(Xe[n[0]],n[1])}pe.AnalysysAgent&&pe.AnalysysAgent.init&&pe.AnalysysAgent.init(s.base),ze();for(var a=0;a<nt.length;a++){var o=nt[a];p.objHasKay(Xe,o[0])&&"identify"!==o[0]&&"alias"!==o[0]&&o[0].indexOf("Super")<0&&Xe[o[0]].apply(Xe[o[0]],o[1])}}return tt.init=function(e){"Object"===p.paramType(rt)&&(rt=e,et(ot))},tt});
