var e={base:{outer:['appid','xwho','xwhat','xwhen','xcontext'],xcontext:['$lib','$lib_version','$platform','$debug','$is_login']},$startup:{xcontext:['$screen_width','$screen_height','$time_zone','$language','$session_id','$is_first_time','$is_first_day','$utm_campaign_id','$utm_source','$utm_medium','$utm_term','$utm_content','$utm_campaign','$is_time_calibrated']},$track:{xcontext:['$screen_width','$screen_height','$time_zone','$language','$is_first_day','$session_id','$utm_campaign_id','$utm_source','$utm_medium','$utm_term','$utm_content','$utm_campaign','$is_time_calibrated']},$pageview:{xcontext:['$screen_width','$screen_height','$time_zone','$language','$session_id','$is_first_day','$referrer','$referrer_domain','$title','$url','$startup_time','$utm_campaign_id','$utm_source','$utm_medium','$utm_term','$utm_content','$utm_campaign','$is_time_calibrated']},$alias:{xcontext:['$original_id']},$getPresetProperties:{xcontext:['$screen_width','$screen_height','$time_zone','$session_id','$language']}},t={base:{appid:'',$debug:0,uploadURL:'',auto:!0,autoProfile:!0,hash:!0,singlePage:!0,pageProperty:{},$lib_version:'4.3.0',cross_subdomain:!0,cross_subdomain_super:!0,allowTimeCheck:!1,getDataTimeout:1e4,sendDataTimeout:1e4},status:{code:200,FnName:'',key:'',value:'',errorCode:'',successCode:''},keywords:e.base.xcontext,baseJson:e.base.outer,sendNum:1800,system:{}},r='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function n(){}n.prototype.paramType=function(e){return Object.prototype.toString.call(e).replace('[object ','').replace(']','')},n.prototype.objHasKay=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.prototype.ArrayToObj=function(e){for(var t={},r=0;r<e.length;r++)t[e[r]]='';return t},n.prototype.keyValueToObje=function(e,t){var r={};return r[e]=t,r},n.prototype.toDeep=function(e){var t=null;if('Array'===this.paramType(e)){t=[];for(var r=0;r<e.length;r++)t.push(this.toDeep(e[r]))}else if('Object'===this.paramType(e))for(var n in t={},e)t[n]=this.toDeep(e[n]);else t=e;return t},n.prototype.toDeepObj=function(e,t){var r={};if('String'===this.paramType(e))return r=this.keyValueToObje(e,t);if('Array'===this.paramType(e))return r=this.ArrayToObj(e);if('Object'===this.paramType(e))for(var n in e)r[n]=this.toDeepObj(e[n]);return r},n.prototype.toDeep=function(e){var t=null;if('Array'===this.paramType(e)){t=[];for(var r=0;r<e.length;r++)t.push(this.toDeep(e[r]))}else if('Object'===this.paramType(e))for(var n in t={},e)t[n]=this.toDeep(e[n]);else t=e;return t},n.prototype.toObj=function(e,t){var r={};return'String'===this.paramType(e)?r=this.keyValueToObje(e,t):'Array'===this.paramType(e)?r=this.ArrayToObj(e):'Object'===this.paramType(e)?e:r},n.prototype.objMerge=function(e,t){if('Object'!==this.paramType(e)||'Object'!==this.paramType(t))return e;var r={};for(var n in e)r[n]=e[n];for(var a in t){var o=t[a],i=r[a],s=this.paramType(o),u=this.paramType(i);r[a]=i&&'Object'===u&&'Object'===s?this.objMerge(i,o):'Array'===u&&'Array'===s?this.arrayMergeUnique(i,o):'Function'===s&&'Function'===u?this.compose(i,o):o}return r},n.prototype.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},n.prototype.fnMerge=function(e,t){return this.objMerge(e,t)},n.prototype.arrayUnique=function(e){for(var t=[],r={},n=0;n<e.length;n++)r[e[n]]||(r[e[n]]=!0,t.push(e[n]));return t},n.prototype.arrayMerge=function(e,t){for(var r=[],n=0;n<e.length;n++){var a=e[n];'Object'===this.paramType(e[n])&&(a=this.toDeep(e[n])),r.push(a)}for(var o=0;o<t.length;o++){var i=t[o];'Object'===this.paramType(t[o])&&(i=this.toDeep(t[o])),r.push(i)}return r},n.prototype.arrayMergeUnique=function(e,t){return e.push.apply(e,t),this.arrayUnique(e)},n.prototype.encode=function(e){var t,n,a,o,i,s,u,c='',l=0;for(e=function(e){e=e.replace(/\r\n/g,'\n');for(var t='',r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t}(e);l<e.length;)o=(t=e.charCodeAt(l++))>>2,i=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(a=e.charCodeAt(l++))>>6,u=63&a,isNaN(n)?s=u=64:isNaN(a)&&(u=64),c=c+r.charAt(o)+r.charAt(i)+r.charAt(s)+r.charAt(u);return c},n.prototype.decode=function(e){var t,n,a,o,i,s,u='',c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,'');c<e.length;)t=r.indexOf(e.charAt(c++))<<2|(o=r.indexOf(e.charAt(c++)))>>4,n=(15&o)<<4|(i=r.indexOf(e.charAt(c++)))>>2,a=(3&i)<<6|(s=r.indexOf(e.charAt(c++))),u+=String.fromCharCode(t),64!==i&&(u+=String.fromCharCode(n)),64!==s&&(u+=String.fromCharCode(a));return u=function(e){for(var t='',r=0,n=0,a=0,o=0;r<e.length;)(n=e.charCodeAt(r))<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(a=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&a),r+=2):(a=e.charCodeAt(r+1),o=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&a)<<6|63&o),r+=3);return t}(u)},n.prototype.isEmptyObject=function(e){for(var t in e)return!1;return!0},n.prototype.format=function(e,t){var r=e.getTimezoneOffset(),n={'M+':(e=new Date(e.getTime()+60*r*1e3+288e5)).getMonth()+1,'d+':e.getDate(),'h+':e.getHours(),'m+':e.getMinutes(),'s+':e.getSeconds(),'q+':Math.floor((e.getMonth()+3)/3),'S+':e.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+'').substr(4-RegExp.$1.length))),n)new RegExp('('+a+')').test(t)&&(t=t.replace(RegExp.$1,3===RegExp.$1.length?(''+n[a]).length<3?('00'+n[a]).substr(('00'+n[a]).length-3,('00'+n[a]).length):n[a]:('00'+n[a]).substr((''+n[a]).length)));return t},n.prototype.MD5=function(e,t){function r(e,t){return e<<t|e>>>32-t}function n(e,t){var r,n,a,o,i;return a=2147483648&e,o=2147483648&t,i=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(n=1073741824&t)?2147483648^i^a^o:r|n?1073741824&i?3221225472^i^a^o:1073741824^i^a^o:i^a^o}function a(e,t,a,o,i,s,u){return e=n(e,n(n(function(e,t,r){return e&t|~e&r}(t,a,o),i),u)),n(r(e,s),t)}function o(e,t,a,o,i,s,u){return e=n(e,n(n(function(e,t,r){return e&r|t&~r}(t,a,o),i),u)),n(r(e,s),t)}function i(e,t,a,o,i,s,u){return e=n(e,n(n(function(e,t,r){return e^t^r}(t,a,o),i),u)),n(r(e,s),t)}function s(e,t,a,o,i,s,u){return e=n(e,n(n(function(e,t,r){return t^(e|~r)}(t,a,o),i),u)),n(r(e,s),t)}function u(e){var t,r='',n='';for(t=0;t<=3;t++)r+=(n='0'+(e>>>8*t&255).toString(16)).substr(n.length-2,2);return r}var c,l,p,m,f,y,d,g,h,v;for(c=function(e){for(var t,r=e.length,n=r+8,a=16*((n-n%64)/64+1),o=Array(a-1),i=0,s=0;s<r;)i=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<i,s++;return i=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<i,o[a-2]=r<<3,o[a-1]=r>>>29,o}(e),d=1732584193,g=4023233417,h=2562383102,v=271733878,l=0;l<c.length;l+=16)p=d,m=g,f=h,y=v,d=a(d,g,h,v,c[l+0],7,3614090360),v=a(v,d,g,h,c[l+1],12,3905402710),h=a(h,v,d,g,c[l+2],17,606105819),g=a(g,h,v,d,c[l+3],22,3250441966),d=a(d,g,h,v,c[l+4],7,4118548399),v=a(v,d,g,h,c[l+5],12,1200080426),h=a(h,v,d,g,c[l+6],17,2821735955),g=a(g,h,v,d,c[l+7],22,4249261313),d=a(d,g,h,v,c[l+8],7,1770035416),v=a(v,d,g,h,c[l+9],12,2336552879),h=a(h,v,d,g,c[l+10],17,4294925233),g=a(g,h,v,d,c[l+11],22,2304563134),d=a(d,g,h,v,c[l+12],7,1804603682),v=a(v,d,g,h,c[l+13],12,4254626195),h=a(h,v,d,g,c[l+14],17,2792965006),d=o(d,g=a(g,h,v,d,c[l+15],22,1236535329),h,v,c[l+1],5,4129170786),v=o(v,d,g,h,c[l+6],9,3225465664),h=o(h,v,d,g,c[l+11],14,643717713),g=o(g,h,v,d,c[l+0],20,3921069994),d=o(d,g,h,v,c[l+5],5,3593408605),v=o(v,d,g,h,c[l+10],9,38016083),h=o(h,v,d,g,c[l+15],14,3634488961),g=o(g,h,v,d,c[l+4],20,3889429448),d=o(d,g,h,v,c[l+9],5,568446438),v=o(v,d,g,h,c[l+14],9,3275163606),h=o(h,v,d,g,c[l+3],14,4107603335),g=o(g,h,v,d,c[l+8],20,1163531501),d=o(d,g,h,v,c[l+13],5,2850285829),v=o(v,d,g,h,c[l+2],9,4243563512),h=o(h,v,d,g,c[l+7],14,1735328473),d=i(d,g=o(g,h,v,d,c[l+12],20,2368359562),h,v,c[l+5],4,4294588738),v=i(v,d,g,h,c[l+8],11,2272392833),h=i(h,v,d,g,c[l+11],16,1839030562),g=i(g,h,v,d,c[l+14],23,4259657740),d=i(d,g,h,v,c[l+1],4,2763975236),v=i(v,d,g,h,c[l+4],11,1272893353),h=i(h,v,d,g,c[l+7],16,4139469664),g=i(g,h,v,d,c[l+10],23,3200236656),d=i(d,g,h,v,c[l+13],4,681279174),v=i(v,d,g,h,c[l+0],11,3936430074),h=i(h,v,d,g,c[l+3],16,3572445317),g=i(g,h,v,d,c[l+6],23,76029189),d=i(d,g,h,v,c[l+9],4,3654602809),v=i(v,d,g,h,c[l+12],11,3873151461),h=i(h,v,d,g,c[l+15],16,530742520),d=s(d,g=i(g,h,v,d,c[l+2],23,3299628645),h,v,c[l+0],6,4096336452),v=s(v,d,g,h,c[l+7],10,1126891415),h=s(h,v,d,g,c[l+14],15,2878612391),g=s(g,h,v,d,c[l+5],21,4237533241),d=s(d,g,h,v,c[l+12],6,1700485571),v=s(v,d,g,h,c[l+3],10,2399980690),h=s(h,v,d,g,c[l+10],15,4293915773),g=s(g,h,v,d,c[l+1],21,2240044497),d=s(d,g,h,v,c[l+8],6,1873313359),v=s(v,d,g,h,c[l+15],10,4264355552),h=s(h,v,d,g,c[l+6],15,2734768916),g=s(g,h,v,d,c[l+13],21,1309151649),d=s(d,g,h,v,c[l+4],6,4149444226),v=s(v,d,g,h,c[l+11],10,3174756917),h=s(h,v,d,g,c[l+2],15,718787259),g=s(g,h,v,d,c[l+9],21,3951481745),d=n(d,p),g=n(g,m),h=n(h,f),v=n(v,y);return 32===t?u(d)+u(g)+u(h)+u(v):u(g)+u(h)},n.prototype.clientTimeZone=function(){var e=(new Date).getTimezoneOffset(),t=parseInt(e/60),r=e%60,n='-';return(t<=0||r<0)&&(n='+',t=-t,r<0&&(r=-r)),1===(t+='').length&&(t='0'+t),1===(r+='').length&&(r='0'+r),n+t+':'+r},n.prototype.delEmpty=function(e){var t={};for(var r in e){var n=!0,a=this.paramType(e[r]);'Object'!==a?(e[r]||'Number'===a&&!isNaN(e[r])||'Boolean'===a||(n=!1),!0===n&&(t[r]=e[r])):t[r]=this.delEmpty(e[r])}for(var o in t){var i=[];for(var s in t[o])i.push(t[o][s]);0===i.length&&t[o].constructor===Object&&delete t[o]}return t},n.prototype.addEvent=function(e,t,r,n){if(document.addEventListener)if('Array'!==this.paramType(e)&&'HTMLCollection'!==this.paramType(e)||!e.length||e===window)e.addEventListener(t,r,n);else for(var a=0;a<e.length;a++)this.addEvent(e[a],t,r,n);else if(e.length&&e!==window)for(var o=0;o<e.length;o++)this.addEvent(e[o],t,r);else e.attachEvent('on'+t,(function(){return r.call(e,window.event)}))},n.prototype.GetUrlParam=function(e){var t=document.location.toString(),r=window.name;'String'===this.paramType(r)&&r.indexOf(e)>-1&&(t=r);var n,a=t.split('?');if(a.length>1){for(var o,i=[],s=1;s<a.length;s++)i.push.apply(i,a[s].split('&'));for(var u=0;u<i.length;u++)if(null!=(o=i[u].split('='))&&o[0]===e){var c=o[1];if(o[1].indexOf('#')>-1&&(c=c.split('#')[0]),c.indexOf('%')>-1){try{var l=decodeURI(c);if(n=l,new RegExp('[\\u4E00-\\u9FFF]+','g').test(n))return l}catch(e){}if('Object'===this.paramType(window.AnalysysModule)&&'Function'===this.paramType(window.AnalysysModule.decodeGBK))try{return window.AnalysysModule.decodeGBK(c,'gbk')}catch(e){}}return c}return''}return''},n.prototype.stringSlice=function(e,t){return e.slice(0,t)},n.prototype.trim=function(e){return'String'===this.paramType(e)?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,''):e},n.prototype.changeHash=function(e){var t=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(){t.apply(window.history,arguments),e.apply(e)},window.history.replaceState=function(){r.apply(window.history,arguments),e.apply(e)};var n;'on'+(n=window.ActiveXObject||'ActiveXObject'in window?'hashchange':'popstate')in window&&this.addEvent(window,n,(function(){setTimeout(e,0)}))},n.prototype.checkTypeList=function(e,t){var r=this.paramType(e);if('String'===r){var n=window.location.href,a=window.location.protocol+'//'+window.location.host,o=a+window.location.pathname;if([n,a,o+'index.html',o,o+window.location.hash].indexOf(e)>-1)return!0}else{if('Function'===r)return e.call(e,t);if('Array'===r)for(var i=0;i<e.length;i++)if(!0===this.checkTypeList(e[i],t))return!0}return!1},n.prototype.selectorAllEleList=function(e){var t=[],r=e.split('.')[0];if('Function'===this.paramType(document.querySelectorAll)&&e.indexOf('|')<0)try{return document.querySelectorAll(e)}catch(e){}var n='';if(e.indexOf('#')>-1){n=e.split('.')[0].split('#')[1];var a=document.getElementById(n);a&&t.push(a)}else{if(e.indexOf('.')<0)return document.getElementsByTagName(r);if(e.indexOf('[')>-1&&e.indexOf(']')>-1)for(var o=document.getElementsByTagName('*'),i=e.replace('[','').replace(']',''),s=0;s<o.length;s++){var u=o[s].getAttribute(i);'String'===this.paramType(u)&&t.push(a)}else for(var c=document.getElementsByTagName(r),l=0;l<c.length;l++){var p=c[l],m='String'===this.paramType(p.className)?p.className.split(' '):[];m.length>0&&(r+'.'+m.join('.')).indexOf(e)>-1&&t.push(p)}}return t},n.prototype.getDomainFromUrl=function(e,t){if(''===t)return'';var r=(t=t||window.location.hostname).split('/');r.length>2&&(t=r[2]);if(!0===/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t)||'localhost'===t)return'';var n=t.split('.'),a=!0===e?2:n.length;('Number'!==this.paramType(a)||a<2)&&(a=2);var o=[];if(!(n.length>1))return'';n.length<a&&(a=n.length);for(var i=n.length-1;i>=0&&o.length!==a;i--)o.push(n[i]);return o.reverse().join('.')},n.prototype.getUrlPath=function(){var e=window.location.hash;return e.indexOf('?')>-1&&(e=e.split('?')[0]),window.location.host+window.location.pathname+e};var a=new n;function o(e){return(o='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e})(e)}var i='',s='';try{i='object'===o(window.localStorage)?window.localStorage:'',s='object'===o(window.sessionStorage)?window.sessionStorage:''}catch(e){}function u(){this.localName='FZ_STROAGE',this.sessionName='FZ_SESSION',this.cookieName='FZ_STROAGE.'+a.getDomainFromUrl(t.base.cross_subdomain),this.checkSubdomain(),this.localObj=this.getLocal(),this.sessionObj=this.getSession()}u.prototype.checkSubdomain=function(){var e=window.AnalysysAgent||[];if('Array'===a.paramType(e))for(var r=0;r<e.length;r++)'cross_subdomain'===e[r][0]&&'Boolean'===a.paramType(e[r][1])&&(t.base.cross_subdomain=e[r][1]);if(e&&a.objHasKay(e.config||{},'cross_subdomain')&&(t.base.cross_subdomain=e.config.cross_subdomain),!0===t.base.cross_subdomain){var n=this.getCookie(this.cookieName)||a.encode('{}');if(n=JSON.parse(a.decode(decodeURIComponent(n))),'Object'===a.paramType(n)&&!a.isEmptyObject(n)){var o=n.ARK_ID,i={};!0===a.objHasKay(n,'ARKSUPER')&&(i=n.ARKSUPER,delete n.ARKSUPER);var s=a.objMerge(this.localObj||{},n);!0!==t.base.cross_subdomain_super||a.isEmptyObject(i)||(s=a.objMerge({ARKSUPER:i},s)),this.setLocal(this.localName,s),this.setCookie('ARK_ID',o)}}},u.prototype.setLocal=function(e,r){this.localObj=this.getLocal(),e===this.localName?this.localObj=r:this.localObj[e]=r;try{if(i?(i.setItem(this.localName,a.encode(JSON.stringify(this.localObj))),s.setItem(this.localName,a.encode(JSON.stringify(this.localObj)))):'POSTDATA'!==e&&this.setCookie(this.cookieName,encodeURIComponent(a.encode(JSON.stringify(this.localObj)))),'POSTDATA'!==e&&!0===t.base.cross_subdomain){var n=a.toDeep(this.localObj);delete n.POSTDATA,this.setCookie(this.cookieName,encodeURIComponent(a.encode(JSON.stringify(n))))}}catch(e){}},u.prototype.getLocal=function(e){try{var t=a.encode('{}');if(i){if(!(t=i.getItem(this.localName)))s.getItem(this.localName)&&(t=s.getItem(this.localName),i.setItem(this.localName,t))}else t=(t=this.getCookie(this.cookieName))?decodeURIComponent(t):a.encode(JSON.stringify(this.localObj));return this.localObj=JSON.parse(a.decode(t)),e?this.localObj[e]:this.localObj}catch(t){return e?'':{}}},u.prototype.removeLocal=function(e){if(this.localObj=this.getLocal(),a.objHasKay(this.localObj,e)&&delete this.localObj[e],a.isEmptyObject(this.localObj))try{i&&(i.removeItem(this.localName),s.removeItem(this.localName)),this.removeCookie(this.cookieName)}catch(e){}else if(i&&(i.setItem(this.localName,a.encode(JSON.stringify(this.localObj))),s.setItem(this.localName,a.encode(JSON.stringify(this.localObj)))),'POSTDATA'!==e&&'ARK_ID'!==e&&!0===t.base.cross_subdomain){var r=a.toDeep(this.localObj);delete r.POSTDATA,delete r.ARK_ID,this.setCookie(this.cookieName,a.encode(JSON.stringify(r)))}},u.prototype.setSession=function(e,t){this.sessionObj=this.getSession(),this.sessionObj[e]=t;try{s?(s.setItem(this.sessionName,a.encode(JSON.stringify(this.sessionObj))),this.removeCookie(this.sessionName)):'POSTDATA'!==e&&this.setCookie(this.sessionName,a.encode(JSON.stringify(this.sessionObj)),'session')}catch(e){}},u.prototype.getSession=function(e){try{var t=a.encode('{}');return s?(t=s.getItem(this.sessionName)||a.encode('{}'),this.removeCookie(this.sessionName)):(t=this.getCookie(this.sessionName))||(t=a.encode(JSON.stringify(this.sessionObj))),this.sessionObj=JSON.parse(a.decode(t)),e?this.sessionObj[e]:this.sessionObj}catch(e){return{}}},u.prototype.removeSession=function(e){if(this.sessionObj=this.getSession(),a.objHasKay(this.sessionObj,e)&&delete this.sessionObj[e],a.isEmptyObject(this.sessionObj))try{s?(s.removeItem(this.sessionName),this.removeCookie(this.sessionName)):this.removeCookie(this.sessionName)}catch(e){}else s&&s.setItem(this.sessionName,a.encode(JSON.stringify(this.sessionObj)))},u.prototype.setCookie=function(e,r,n){var o='.'+a.getDomainFromUrl(t.base.cross_subdomain),i=o?'; domain='+o:'',s='';if('session'!==n){var u=new Date;u.setTime(u.getTime()+31536e6),s='; expires='+u.toGMTString()}document.cookie=e+'='+r+s+'; path=/'+i},u.prototype.getCookie=function(e){e=e||this.localName;var t=document.cookie;if('string'!=typeof t)return'';var r,n,a=e+'=',o=t.split(/[;&]/);for(r=0;r<o.length;r++){for(n=o[r];' '===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(a))return n.substring(a.length,n.length)||''}},u.prototype.removeCookie=function(e,r,n){r='Boolean'===a.paramType(r)?r:t.base.cross_subdomain;var o='.'+a.getDomainFromUrl(r),i=o?'; domain='+o:'';if('session'!==n){var s=new Date;s.setTime(s.getTime()-94608e6);var u='; expires='+s.toGMTString()}document.cookie=e+'='+u+'; path=/'+i};var c=new u,l={utm_campaign_id:a.GetUrlParam('campaign_id'),utm_source:a.GetUrlParam('utm_source')||a.GetUrlParam('hmsr'),utm_medium:a.GetUrlParam('utm_medium')||a.GetUrlParam('hmpl'),utm_term:a.GetUrlParam('utm_term')||a.GetUrlParam('hmkw'),utm_content:a.GetUrlParam('utm_content')||a.GetUrlParam('hmci'),utm_campaign:a.GetUrlParam('utm_campaign')||a.GetUrlParam('hmcu')};function p(){l={utm_campaign_id:'',utm_source:'',utm_medium:'',utm_term:'',utm_content:'',utm_campaign:''}}function m(){this.sessionId=c.getLocal('SEESIONID')||this.setId(),this.sessionDate=c.getLocal('SEESIONDATE')||0}m.prototype.setId=function(){var e=+new Date;return this.sessionId=a.MD5('WC'+e.toString()+1e7*Math.random()),this.sessionDate=e,c.setLocal('SEESIONID',this.sessionId),c.setLocal('SEESIONDATE',this.sessionDate),this.sessionId},m.prototype.getId=function(){var e=new Date,t=e.getTime(),r=e.getTimezoneOffset(),n=new Date(t+60*r*1e3+288e5).getDate();this.sessionDate=c.getLocal('SEESIONDATE')||0;var a=0===this.sessionDate?0:new Date(this.sessionDate+60*r*1e3+288e5).getDate();return(!this.sessionId||!this.sessionDate||Number(t)-Number(this.sessionDate)>18e5||n!==a)&&(p(),this.setId()),this.sessionDate=t,c.setLocal('SEESIONDATE',t),this.sessionId=c.getLocal('SEESIONID')||this.setId(),this.sessionId};var f=new m;function y(){var e=c.getLocal('ARK_LOGINID')||c.getLocal('ARK_TRACKID')||c.getLocal('ARK_ID');return e&&'[object Object]'!==e||(e=d(),c.setLocal('ARK_ID',e)),c.setCookie('ARK_ID',h()||g()),e}function d(){var e=(new Date).getTime().toString()+(1e4*Math.random()).toString(),t='WC'+a.MD5(e.toString(),32)+a.MD5(e.toString(),32).slice(0,4);return c.setCookie('ARK_ID',t),t}function g(){var e=c.getLocal('ARK_ID');return e||(e=d(),c.setLocal('ARK_ID',e)),e}function h(){return c.getLocal('ARK_TRACKID')}var v=t.base;function T(){return v.appid}function b(){return v.$debug}function A(){return'/'!==v.uploadURL.charAt(v.uploadURL.length-1)&&(v.uploadURL+='/'),v.uploadURL}function S(){return+new Date+(c.getLocal('ANSSERVERTIME')?Number(c.getLocal('ANSSERVERTIME')):0)}function _(){return!!c.getLocal('ANSSERVERTIME')}function w(){return t.status.FnName}function $(){var e=!1;return(c.getLocal('ARK_LOGINID')||c.getLocal('ARK_TRACK_LOGIN'))&&(e=!0),e}var O='GMT'+a.clientTimeZone(),N=(navigator.language||navigator.browserLanguage).toLowerCase();function R(){return f.getId()}function L(){var e=c.getLocal('FRISTIME');return c.setLocal('FRISTIME',!1),e}function E(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=r<10?'0'+r:r;var n=e.getDate(),a=t+''+r+(n=n<10?'0'+n:n),o=c.getLocal('FRISTDAY');return!o||a===o}function j(){return h()||g()}var C=document.referrer||'';function k(e){C=e}function F(){var e=C;try{e=decodeURIComponent(C)}catch(e){}return e}function x(){return a.getDomainFromUrl(!1,C)}function I(){return document.title}function P(){return c.getSession('STARTUPTIME')||''}function U(){var e=window.location.href;try{e=decodeURIComponent(e)}catch(e){}return e}function D(){return v.$lib_version}function M(){return'Number'===a.paramType(Number(window.screen.width))?Number(window.screen.width):0}function K(){return'Number'===a.paramType(Number(window.screen.height))?Number(window.screen.height):0}var V=c.getSession('ARK_UTM')||'';function H(){return l.utm_campaign_id}function Y(){return l.utm_source}function J(){return l.utm_medium}function G(){return l.utm_term}function B(){return l.utm_content}function W(){return l.utm_campaign}l.utm_campaign||l.utm_source||l.utm_medium||l.utm_campaign_id||l.utm_term||l.utm_content?(V!==JSON.stringify(l)&&f.setId(),c.setSession('ARK_UTM',JSON.stringify(l))):(p(),c.removeSession('ARK_UTM'));var q=Object.freeze({__proto__:null,getAppId:T,getId:y,getUploadURL:A,appkey:function(e){v.appid=e},debugMode:function(e){v.$debug=e},uploadURL:function(e){'/'!==e.charAt(e.length-1)&&(e+='/'),v.uploadURL=e},getDebugMode:b,nowDate:S,getXwhat:w,isLogin:$,timeZone:O,language:N,getSessionId:R,isFirstTime:L,isFirstDay:E,originalId:j,getReferrer:F,getReferrerDomain:x,getTitle:I,getUrl:U,getScreenWidth:M,getScreenHeight:K,startupTime:P,getLibVersion:D,utmCampaignId:H,utmSource:Y,utmMedium:J,utmTerm:G,utmContent:B,utmCampaign:W,timeCalibration:_,setReferrer:k}),z={resetKeywords:['appid','$debug','uploadUrl'],uploadURL:{valueType:0,value:A,check:{value:['isString','nimLength','isUrl'],errorCode:'60007',successCode:'20008'}},appid:{valueType:0,value:T,check:{value:['isString','nimLength'],errorCode:'60006',successCode:'20006'}},hash:{check:{value:['isBoolean'],errorCode:'60003'}},auto:{check:{value:['isBoolean'],errorCode:'60003'}},autoProfile:{check:{value:['isBoolean'],errorCode:'60003'}},pageProperty:{check:{value:['isObject'],errorCode:'600016'}},xwho:{valueType:0,value:y,check:{value:['isString','nimLength']}},xwhen:{valueType:0,value:S},xwhat:{valueType:0,value:w,check:{value:['isString','nimLength']}},xcontext:{$lib:{valueType:1,value:'weCode'},$lib_version:{valueType:0,value:D,check:{value:['isString'],successCode:'20007'}},$platform:{valueType:1,value:'weCode'},$debug:{valueType:0,value:b,check:{value:['isNumber','isDebug']}},$is_login:{valueType:0,value:$,check:{value:['isBoolean']}},$screen_width:{valueType:0,value:M,check:{value:['isNumber']}},$screen_height:{valueType:0,value:K,check:{value:['isNumber']}},$time_zone:{valueType:1,value:O},$language:{valueType:1,value:N},$session_id:{valueType:0,value:R},$is_first_time:{valueType:0,value:L},$is_first_day:{valueType:0,value:E},$referrer:{valueType:0,value:F},$referrer_domain:{valueType:0,value:x},$title:{valueType:0,value:I},$url:{valueType:0,value:U},$startup_time:{valueType:0,value:P},$original_id:{valueType:0,value:j},$utm_campaign_id:{valueType:0,value:H},$utm_source:{valueType:0,value:Y},$utm_medium:{valueType:0,value:J},$utm_term:{valueType:0,value:G},$utm_content:{valueType:0,value:B},$utm_campaign:{valueType:0,value:W},$is_time_calibrated:{valueType:0,value:_}},xcontextCommonRule:{check:{key:['isString','length99','notSpecialCharacters','keywords'],value:['notObject','isArrayString','length255']}},$track:{check:{key:['isString','notSpecialCharacters','length99']}},$alias:{check:{key:['isString','keyLength255']}},$profile_increment:{check:{key:['isString','length99','notSpecialCharacters'],value:['isNumber']}},$profile_unset:{check:{key:['isString','length99','notSpecialCharacters']}},$pageview:{check:{key:['isString','keyLength255']}}};var X={ele:'',click_x:0,click_y:0,clickEle:''};function Z(){return X.ele.tagName.toLowerCase()}function Q(){return X.ele&&null!==X.ele.getAttribute('data-ark-click')}function ee(e){if(!e||'Array'===a.paramType(e)&&0===e.length||'String'===a.paramType(e)&&''===e)return!1;var t=X.ele;if('String'===a.paramType(e)){var r=t.tagName.toLowerCase(),n='String'===a.paramType(t.className)?'.'+t.className.split(' ').join('.'):'',i=t.id?'#'+t.id:'';if(r===e.toLowerCase()||n===e||i===e||r+n===e||r+i===e||i+n===e||r+i+n===e)return!0}else if('Array'===a.paramType(e)){for(var s=0;s<e.length;s++)if(!0===ee(e[s]))return!0}else{if('Function'===a.paramType(e))return e.call(e,t)||!1;if('object'===o(e)&&e===t)return!0}return!1}function te(){var e=Z();if(['a','button','input','select','textarea','svg'].indexOf(e)>-1||Q()||ee(t.base.trackList)){if('svg'===e&&X.ele.children&&X.ele.children.length>0){for(var r=0,n=X.ele.children,a=0;a<n.length;a++)'use'===n[a].tagName.toLowerCase()&&(n[a].getAttribute('xlink:href')||Q()||ee(t.base.trackList))&&(r=1);return r}return 1}return 0}var re={xcontext:{$page_width:{valueType:0,value:function(){return document.documentElement.scrollWidth}},$page_height:{valueType:0,value:function(){return document.documentElement.scrollHeight}},$element_path:{valueType:0,value:function(){return function(e){for(var t=[],r=e;null!=r;){var n=0;if(r.parentNode){var o=r.parentNode.children;if(o)for(var i=0;i<o.length;i++)o[i]===r&&(n=i)}var s=r.tagName;if(s){s=s.toLowerCase();var u=r.id?'#'+r.id:'',c=r.className&&'String'===a.paramType(r.className)?r.className.split(' '):[];if(c.length>0){for(var l='',p=0;p<c.length;p++)c[p]&&c[p].indexOf('ARK')<0&&(l+='.'+c[p]);t.push(s+u+l+'|'+n)}else t.push(s+u+'|'+n);r=r.parentNode}else r=r.parentNode}return t.join('<')}(X.ele)}},$url_path:{valueType:0,value:function(){var e=window.location.protocol+'//'+window.location.host+window.location.pathname+window.location.hash;try{e=decodeURIComponent(e)}catch(e){}return e}},$element_type:{valueType:0,value:Z},$element_clickable:{valueType:0,value:te},$element_content:{valueType:0,value:function(){return function(e,t){var r='';if('input'===e.tagName.toLowerCase()?r=e.value||'':'img'===e.tagName.toLowerCase()?r=e.getAttribute('alt')||e.getAttribute('title')||'':'a'===e.tagName.toLowerCase()&&(r=e.getAttribute('title')||''),!r)for(var n=e.childNodes,o=0;o<n.length;o++)3===n[o].nodeType&&(r+=n[o].nodeValue);return r=r&&'String'===a.paramType(r)?r.replace(/[\r\n]/g,' ').replace(/[ ]+/g,' '):'','input'===e.tagName.toLowerCase()&&!0!==t?'':r=a.trim(r)}(X.ele)}},$element_id:{valueType:0,value:function(){return X.ele.id||X.ele.getAttribute('id')||''}},$element_name:{valueType:0,value:function(){return X.ele.getAttribute('name')||''}},$element_target_url:{valueType:0,value:function(){var e=X.ele.getAttribute('href');if(e&&e.indexOf('javascript:')<0){try{e=decodeURIComponent(e)}catch(e){}return e}return''}},$element_class_name:{valueType:0,value:function(){var e=X.ele.getAttribute('class')||'';if(e){for(var t=e.split(' '),r=[],n=0;n<t.length;n++)''!==t[n]&&r.push(t[n]);return e='.'+r.join('.')}return''}}}},ne={};function ae(e){var r=e||window.event;r.touches&&r.touches.length>0&&(r=r.touches[0]);var n=r.target||r.srcElement;if(!(a.checkTypeList(ne.autoClickBlackList,n)||ne.autoClickWhiteList&&!a.checkTypeList(ne.autoClickWhiteList,n))&&(X.ele=n,function(){for(var e=X.ele;null!=X.ele;)if(1===X.ele.nodeType){if('Function'===a.paramType(X.ele.onclick)||1===te()||Q()||ee(t.base.trackList)){e=X.ele;break}X.ele=X.ele.parentNode}else X.ele=X.ele.parentNode;X.ele=e}(),1===te())){var o=ne.user_click_property,i={};if('Object'===a.paramType(o)){for(var s in o)'Function'===a.paramType(o[s])&&(o[s]=o[s].call(o[s],n));i=o}else'Function'===a.paramType(o)&&(i=o.call(o,n));var u=X.ele.getAttribute('data-ark-click')||{};if('String'===a.paramType(u))try{u=JSON.parse(u)}catch(r){}'Object'!==a.paramType(u)&&(u={}),'Object'===a.paramType(i)&&(u=a.objMerge(i,u)),window.AnalysysAgent.freeApi('$user_click',u)}}for(var oe={AnalysysAgent:{init:function(e){return ne=e,!0===e.autoTrack&&a.addEvent(document,'click',ae,!0),e}}},ie=Object.freeze({__proto__:null,fieldRules:re,fieldTemplate:{$user_click:{xcontext:['$url_path','$url','$title','$is_first_day','$session_id','$is_time_calibrated','$element_type','$element_path','$element_content','$element_id','$element_name','$element_target_url','$element_class_name']}},lifecycle:oe}),se={xcontext:{$brand:{valueType:0,value:function(){return t.system.$brand}},$model:{valueType:0,value:function(){return t.system.$model}},$os:{valueType:0,value:function(){return t.system.$os}},$os_version:{valueType:0,value:function(){return t.system.$os_version}},$network:{valueType:0,value:function(){return t.system.$network}}}},ue={},ce=['$startup','$track','$pageview','$user_click'],le={xcontext:['$brand','$model','$os','$os_version','$network']},pe=0;pe<ce.length;pe++)ue[ce[pe]]=le;for(var me=[Object.freeze({__proto__:null,fieldRules:se,fieldTemplate:ue}),ie],fe=z||{},ye=e||{},de={}||{},ge=0;ge<me.length;ge++)me[ge].fieldRules&&(fe=a.objMerge(fe,me[ge].fieldRules)),me[ge].fieldTemplate&&(ye=a.objMerge(ye,me[ge].fieldTemplate)),me[ge].lifecycle&&(de=a.fnMerge(de,me[ge].lifecycle));for(var he={},ve={},Te=ye.base,be=Te.outer,Ae=0;Ae<be.length;Ae++)Te[be[Ae]]?ve[be[Ae]]=a.toObj(Te[be[Ae]]):ve[be[Ae]]='';for(var Se in ye)if('base'!==Se){var _e=a.toDeepObj(ye[Se]);he[Se+'base']=_e,he[Se]=a.objMerge(ve,_e)}function we(e){return he[e]||he.commonTemp}he.commonTemp=ve;var $e={common:'{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}',60001:'{FN}:Property key invalid, support type: String \ncurrent key:{KEY}\n',60002:'{FN}:Property value invalid of key[{KEY}], support type: Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}',60003:'{FN}:Property value invalid of key[{KEY}], support type: Boolean \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}',60004:'{FN}:Property value invalid of key[{KEY}], support type: Array \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}',60005:'{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !',60006:'Please set appkey first.',60007:'Please set uploadURL first.',60008:'Send message failed.',60009:'{FN}:The length of the property key (string[{KEY}]) needs to be 1-125 !',600010:'{FN}:The length of the property key (string[{KEY}]) needs to be 1-99 !',600011:'{FN}:[{KEY}] does not conform to naming rules!',600012:'{FN}:Property key invalid, nonsupport value: $lib/$lib_version/$platform/$first_visit_time/$debug/$is_login \ncurrent KEY:{KEY}',600013:'{FN}:Property value invalid of key[{KEY}], support type: Array with String as its internal element \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}',600016:'{FN}:Property value invalid of key[{KEY}], support type: Object \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}',600017:'{FN}:The length of the property key (string[{KEY}]) needs to be 1-255 !',600018:'{FN}:Property value invalid of key[{KEY}] invalid, support type: String \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}',600019:'{FN}:The length of the property[{KEY}] value (string[{VALUE}]) needs to be 1-255 !',600020:'{FN}:Property value invalid of key[{KEY}], support type: Boolean/Array/String/Number \ncurrent value:{VALUE}\ncurrent type: {VALUETYPE}'},Oe={common:'',20001:'Send message success',20002:'{FN}: set success ({VALUE})',20003:'{FN}:({VALUE}) delete success',20004:'{FN}:clear success',20005:'{FN}:reset success',20006:'set appkey success. current appkey : {VALUE}',20007:'Init Analysys weCode sdk success, version : {VALUE}',20008:'set uploadURL success. current uploadURL : {VALUE}',20009:'{FN}:[{KEY}] : get failed',20010:'{FN}:[{KEY}] : get success. ({VALUE})',20011:'{FN}:({VALUE}) delete failed'};function Ne(e){if(1===t.base.$debug||2===t.base.$debug){var r=t.status,n=r.successCode,o=r.FnName,i=r.key,s=r.value,u=Oe[n]||Oe.common;'String'===a.paramType(i)&&i.length>30&&(i=a.stringSlice(i,30)+'...'),'String'===a.paramType(o)&&o.length>30&&(o=a.stringSlice(o,30)+'...');var c=u.replace('{FN}',o).replace('{KEY}',i).replace('{VALUE}',s);e&&(c=e),c&&console.log(c)}}function Re(){if(1===t.base.$debug||2===t.base.$debug){var e=t.status,r=e.errorCode,n=e.FnName,o=e.key,i=e.value;'Object'===a.paramType(i)&&(i=JSON.stringify(i));var s=a.paramType(i);'600018'!==r||o||(r='600011'),'60005'!==r||o||(r='600017'),('600017'===r||'600019'===r||'60009'===r||'600010'===r||'60005'===r)&&'String'===a.paramType(i)&&i.length&&i.length>30&&(i=a.stringSlice(i,30)+'...'),'String'===a.paramType(o)&&o.length>30&&(o=a.stringSlice(o,30)+'...'),'String'===a.paramType(n)&&n.length>30&&(n=a.stringSlice(n,30)+'...');var u=($e[r]||$e.common).replace('{FN}',n).replace('{KEY}',o).replace('{VALUE}',i).replace('{VALUETYPE}',s);if(console.warn(u),de.errorLog&&de.errorLog.init&&'60008'!==r){var c=t.status.FnName;de.errorLog.init(u),t.status.FnName=c}}}var Le=function(){};(Le.prototype=a).isString=function(e){return t.status.errorCode='60001','String'===a.paramType(e)},Le.prototype.isNumber=function(e){return t.status.errorCode='60002','Number'===a.paramType(e)},Le.prototype.isBoolean=function(e){return t.status.errorCode='60003','Boolean'===a.paramType(e)},Le.prototype.isObject=function(e){return'Object'===this.paramType(e)},Le.prototype.lengthRule=function(e,r,n){this.isNumber(n)||(n=1/0);var a=!0;return this.isNumber(r)&&e.length&&e.length>r&&e.length<n+1||(t.status.errorCode='60005',a=!1),a},Le.prototype.nimLength=function(e){return this.lengthRule(e,0)},Le.prototype.length99=function(e){var r=this.lengthRule(e,0,99);return r||(t.status.errorCode='600010'),r},Le.prototype.length125=function(e){var r=this.lengthRule(e,0,125);return r||(t.status.errorCode='60009'),r},Le.prototype.length255=function(e){if(!(e||this.isString(e)||this.isNumber(e)||this.isBoolean(e)))return t.status.errorCode='60005',!1;'String'!==this.paramType(e)&&(e=e.toString());var r=this.lengthRule(e,0,255);return r||(t.status.errorCode='600019'),r},Le.prototype.keyLength255=function(e){var r=this.length255(e);return r||(t.status.errorCode='600017'),r},Le.prototype.isUrl=function(e){var r=e;return!0===new RegExp(/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- ./?%&=]*)?/).test(r)||(t.status.errorCode='60006',!1)},Le.prototype.isDebug=function(e){return!(!this.isNumber(e)||0!==e&&1!==e&&2!==e)},Le.prototype.notObject=function(e){var r=!this.isObject(e);return r||(t.status.errorCode='600020'),r},Le.prototype.notSpecialCharacters=function(e){return!(new RegExp('[\\u4E00-\\u9FA5]|[\\uFE30-\\uFFA0]','gi').test(e)||!/^[$a-zA-Z][a-zA-Z0-9_$]{0,}$/.test(e))||(t.status.errorCode='600011',!1)},Le.prototype.isArrayString=function(e){if('Array'===this.paramType(e))for(var r=0;r<e.length;r++){if('String'!==this.paramType(e[r]))return t.status.errorCode='600013',!1;if(!this.length255(e[r]))return e[r]&&e[r].length>500&&(e[r]=a.stringSlice(e[r],499)+'$'),t.status.value=e[r],!1}return!0},Le.prototype.keywords=function(e){return!(t.keywords.indexOf(e)>-1)||(t.status.errorCode='600012',!1)};var Ee=new Le;function je(e,t){for(var r=0;r<t.length;r++){if(!Ee[t[r]](e))return!1}return!0}function Ce(e,r,n){var o=n.check,i=!0;if(!o)return i;var s=o.key,u=o.value||fe.xcontextCommonRule.value;return s&&(t.status.code=200,i=je(e,s),t.status.key=e,i||(t.status.code=400,Re())),u&&(t.status.code=200,i=je(r,u),'Array'!==a.paramType(r)&&(t.status.value=r),i||(t.status.code=400,Re())),i}function ke(){t.status={code:200,FnName:t.status.FnName,key:'',value:'',errorCode:'',successCode:''}}function Fe(e,t){var r=t||fe,n={};for(var o in e){var i=e[o],s=r[o];if(s){var u='';if('Object'===a.paramType(i)){var c=Fe(i,s);n[o]=c}else a.objHasKay(s,'valueType')&&(0===s.valueType&&(u=s.value(),'String'===a.paramType(u)&&u.length>500?n[o]=a.stringSlice(u,499)+'$':n[o]=u),1===s.valueType&&(u=s.value,'String'===a.paramType(u)&&u.length>500?n[o]=a.stringSlice(u,499)+'$':n[o]=u))}}return n}function xe(e){if(!(e=e||!1)){var r=t.base;for(var n in r){if('Object'!==a.paramType(r[n]))if('$debug'===n||'appid'===n||'uploadURL'===n)c.getLocal('ANS'+n.toUpperCase())!==r[n]&&(e=!0),e&&c.setLocal('ANS'+n.toUpperCase(),r[n])}}return e&&(c.removeLocal('ARK_LOGINID'),c.removeLocal('ARK_TRACK_LOGIN'),c.removeLocal('ARK_TRACKID'),c.removeLocal('ARKSUPER'),c.removeSession('STARTUP'),c.setLocal('FRISTDAY',a.format(new Date,'yyyyMMdd')),c.setLocal('FRISTIME',!0),c.removeLocal('POSTDATA'),c.removeLocal('ANSSERVERTIME'),c.removeLocal('ARKFRISTPROFILE')),e}function Ie(e,r,n){ke();var o=fe[r]||fe.xcontextCommonRule;if('Object'!==a.paramType(e)||!0===n){var i=o.check.key,s=je(a.trim(e),i);if(t.status.key=e,!s)return Re(),!1}else for(var u in e){Ce(u,e[u],o)||'600019'===t.status.errorCode&&'String'===a.paramType(e[u])&&e[u].length>500&&(e[u]=a.stringSlice(e[u],499)+'$')}return!0}function Pe(e){if('String'===a.paramType(e)){e.indexOf('\n')>-1&&(e=e.replace(/[\r\n]/g,''));try{return JSON.parse(e)}catch(e){}try{return window.AnalysysModule.zipInflate(e)}catch(e){}return'H4sIAAAAAAAAAKtWSs5PSVWyMjIwqAUAVAOW6gwAAAA='===e?{code:200}:'H4sIAAAAAAAAAKtWSs5PSVWyMjUwqAUA7TtBdwwAAAA='===e?{code:500}:'H4sIAAAAAAAAAKtWSs5PSVWyMjEy0FHKLU5XslJySSxJVHBJTS6qLChRcC0qyi/S01OqBQBdATGSKQAAAA=='===e?{code:420}:{code:200}}return'Object'===a.paramType(e)?e:{code:200}}function Ue(){var e=null;if(window.XDomainRequest)return new window.XDomainRequest;if(window.XMLHttpRequest)e=new window.XMLHttpRequest;else try{e=new window.ActiveXObject('Microsoft.XMLHTTP')}catch(t){try{e=new window.ActiveXObject('Msxml2.XMLHTTP')}catch(t){e=new window.XMLHttpRequest}}return e}function De(e){var r=!1,n=new Ue;n.onload=function(){r||(r=!0,e.success(Pe(n.responseText),n))},n.onerror=function(){r||(r=!0,e.error(Pe(n.responseText),n))},n.onreadystatechange=function(e,n){return function(){if(4===e.readyState){try{if(e.getAllResponseHeaders().indexOf('Date')>-1||e.getAllResponseHeaders().indexOf('date')>-1){var a=+new Date,o=e.getResponseHeader('Date')||e.getResponseHeader('date');o&&!0===t.base.allowTimeCheck?c.setLocal('ANSSERVERTIME',+new Date(o)-a):c.setLocal('ANSSERVERTIME',0)}}catch(e){}if(e.status>=200&&e.status<300||304===e.status){if(r)return;r=!0,n.success(Pe(e.responseText),e)}else{if(r)return;r=!0,n.error()}e.onreadystatechange=null,e.onload=null}}}(n,e);try{n.open(e.type,e.url,!0),n.setRequestHeader('Content-Type','application/x-www-form-urlencoded');var o=t.base.sendDataTimeout;if('GET'===e.type?(o=t.base.getDataTimeout,n.send(null)):n.send(e.data),'Number'===a.paramType(o))if('Number'===a.paramType(n.timeout))n.timeout=o;else{var i=function(e){return function(){e.abort()}}(n);setTimeout(i,o)}}catch(e){}}function Me(){this.url='',this.data='',this.type='GET',this.success=function(){},this.error=function(){}}Me.prototype.get=function(e){var t=[];for(var r in e.data)t.push(r+'='+encodeURIComponent(e.data[r]));var n=e.url.indexOf('?')>-1?e.url+'&'+t.join('&'):e.url+'?'+t.join('&');this.url=n,this.data=e.data,this.type='GET',this.success=e.success||function(){},this.error=e.error||function(){},De(this)},Me.prototype.post=function(e){this.url=e.url,this.data=e.data,this.type='POST',this.success=e.success||function(){},this.error=e.error||function(){},De(this)};var Ke=!0,Ve='img',He=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function Ye(e,r){'img'!==Ve&&(Ke=!1);var n=e;'Array'===a.paramType(e)&&(e=function e(t){if('Array'===a.paramType(t))for(var r=0;r<t.length;r++)t[r]=e(t[r]);if('Object'===a.paramType(t))for(var n in t){var o=t[n];t[n]=e(o)}if('String'===a.paramType(t)){var i=t.replace(He,(function(e){return'\\u'+('0000'+e.charCodeAt(0).toString(16)).slice(-4)}));return'Sting'!==a.paramType(i)?t:i}return t}(e),n=JSON.stringify(e)),window.AnalysysModal&&'function'==typeof window.AnalysysModal&&window.AnalysysModal(e);var o=function(){Ke=!0,t.status.errorCode='60008',Re(),'Function'===a.paramType(r)&&r.call(r)},i=function(e){return function(n){200===n.code||400===n.code||4200===n.code?(t.status.successCode='20001',Ne(),function(e){Ke=!0;var t=c.getLocal('POSTDATA')||[];if(a.isEmptyObject(t)&&(t=[],c.removeLocal('POSTDATA')),0!==t.length){for(var r=[],n=0;n<t.length;n++){for(var o=!1,i=0;i<e.length;i++)e[i].xwhen!==t[n].xwhen&&e[i].xwhen&&t[n].xwhen||(o=!0);!1!==o||'Object'!==a.paramType(t[n])||a.isEmptyObject(t[n])||r.push(t[n])}r.length>0&&'img'!==Ve?(c.setLocal('POSTDATA',r),Ye(r)):c.removeLocal('POSTDATA')}else c.removeLocal('POSTDATA')}(e),'Function'===a.paramType(r)&&r.call(r)):o()}}(e),s={url:t.base.uploadURL+'up?appid='+t.base.appid,data:n,success:i,error:o};Ne('Send message to server: '+t.base.uploadURL+'up?appid='+t.base.appid+'\ndata:'+n),de.upload&&de.upload.init?s=de.upload.init(s):window.AnalysysModule&&'Object'===a.paramType(window.AnalysysModule)&&'Function'===a.paramType(window.AnalysysModule.uploadData)&&(window.AnalysysModule.encryptInit(t.base),s=window.AnalysysModule.uploadData(s)),'img'!==Ve?'post'!==Ve?'send'!==Ve?(new Me).post(s):Je(s,'send'):(new Me).post(s):Je(s,'img')}function Je(e,r){if('send'===r&&navigator.sendBeacon)navigator.sendBeacon(e.url,e.data)&&e.success({code:200});else if('send'!==r||navigator.sendBeacon||(r='img'),e.data=a.encode(e.data),e.data=function(e){var r={data:e.data,send_type:''},n=[];for(var o in r)n.push(o+'='+encodeURIComponent(r[o]));var i=e.url.indexOf('?')>-1?e.url+'&'+n.join('&'):e.url+'?'+n.join('&');i=i.replace(t.base.uploadURL,'/');var s=a.MD5(i,32).split(''),u=s[2]+''+s[0]+s[4];return r.send_type=u,r}(e),'img'===r){var n=[];for(var o in e.data)n.push(o+'='+encodeURIComponent(e.data[o]));var i=e.url.indexOf('?')>-1?e.url+'&'+n.join('&'):e.url+'?'+n.join('&'),s=document.createElement('img'),u=null;s.width=1,s.height=1,s.onerror=s.onload=function(){clearTimeout(u),e.success({code:200}),this.src='',this.onload=null,this.onerror=null,this.onabort=null},s.onabort=function(){this.src='',this.onload=null,this.onerror=null,this.onabort=null,e.error()},'Number'===a.paramType(t.base.sendDataTimeout)&&(u=setTimeout((function(){s.onabort()}),t.base.sendDataTimeout)),s.src=i}}function Ge(e){var r=[];if('Array'===a.paramType(e)&&e.length>0)for(var n=0;n<e.length;n++){var o=Ge(e[n]);o.length>0&&r.push.apply(r,o)}return'Object'===a.paramType(e)&&!a.isEmptyObject(e)&&function(e){if('Object'===a.paramType(e)&&!a.isEmptyObject(e)){for(var r=!0,n=0;n<t.baseJson.length;n++){var o=t.baseJson[n];'xwhat'!==o&&((!e[o]||'Object'===a.paramType(e[o])&&a.isEmptyObject(e[o]))&&(r=!1))}return r}return!1}(e)&&r.push(e),r}function Be(e,r){t.base.sendType&&(Ve=t.base.sendType),'/'!==t.base.uploadURL.charAt(t.base.uploadURL.length-1)&&(t.base.uploadURL+='/');var n=[];if('img'===Ve)n=Ge(e);else{var o=c.getLocal('POSTDATA')||[];0===(o=Ge(o)).length&&c.removeLocal('POSTDATA'),n=o,o.length<500?n.push.apply(n,Ge(e)):n=Ge(e),c.setLocal('POSTDATA',n)}if(!1!==Ke||'img'===Ve){if(n.length>0)if('img'===Ve)for(var i=0;i<n.length;i++)0===i?Ye([n[i]],r):Ye([n[i]]);else Ye(n,r)}else'Function'===a.paramType(r)&&r.call(r)}var We=!1,qe=window.location.href;function ze(e,t,r){Be(Xe(e,t),r)}function Xe(e,r){var n=e,o=r;if(window.AnalysysModule&&window.AnalysysModule.pageClose&&(!0===We?window.AnalysysModule.pageClose.pageEndTrack():We=!0,'String'===a.paramType(n)?window.AnalysysModule.pageClose.createTime(+new Date,n):window.AnalysysModule.pageClose.createTime(+new Date)),!(a.checkTypeList(t.base.pageViewBlackList)||t.base.pageViewWhiteList&&!a.checkTypeList(t.base.pageViewWhiteList))){t.status.FnName='$pageview',ke();var i={};'String'===a.paramType(n)?Ie(i={$title:n}):'Object'===a.paramType(n)?(o=n,n=''):'Function'===a.paramType(n)&&(o='',n=''),'Function'===a.paramType(o)&&(o='');var s={};if('Object'===a.paramType(o)){for(var u in o)'Function'===a.paramType(o[u])&&(o[u]=o[u].call(o[u]));!1===t.base.isHybrid&&Ie(o),s={xcontext:o||{}}}var l=c.getLocal('ARKSUPER')||{};!0===t.base.isHybrid&&(l={});var p=a.objMerge({xcontext:l},s);p=a.objMerge(p,{xcontext:i});var m=we('$pageview'),f=a.delEmpty(Fe(m));return k(qe),a.objMerge(f,p)}}function Ze(e,r,n){t.status.FnName='$profile_set_once',ke(),'Object'===a.paramType(e)&&'Function'===a.paramType(r)?(n=r,r=''):'String'===a.paramType(e)&&'Function'===a.paramType(r)&&(r=r.call(r));var o=a.toObj(e,r);for(var i in o)'Function'===a.paramType(o[i])&&(o[i]=o[i].call(o[i]));Ie(o,'$profile_set_once');var s=we('$profile_set_once'),u=a.delEmpty(Fe(s));Be(a.objMerge(u,{xcontext:o}),n)}function Qe(e){t.status.FnName='$clearSuperProperties',ke(),c.setLocal('ARKSUPER',{}),t.status.successCode='20004',Ne(),'Function'===a.paramType(e)&&e.call(e)}var et=Object.freeze({__proto__:null,pageView:ze,profileSet:function(e,r,n){t.status.FnName='$profile_set',ke(),'Object'===a.paramType(e)&&'Function'===a.paramType(r)?(n=r,r=''):'String'===a.paramType(e)&&'Function'===a.paramType(r)&&(r=r.call(r));var o=a.toObj(e,r);for(var i in o)'Function'===a.paramType(o[i])&&(o[i]=o[i].call(o[i]));Ie(o,'$profile_set');var s=we('$profile_set'),u=a.delEmpty(Fe(s));Be(a.objMerge(u,{xcontext:o}),n)},profileSetOnce:Ze,profileIncrement:function(e,r,n){t.status.FnName='$profile_increment',ke(),'Object'===a.paramType(e)&&'Function'===a.paramType(r)?(n=r,r=''):'String'===a.paramType(e)&&'Function'===a.paramType(r)&&(r=r.call(r));var o=a.toObj(e,r);for(var i in o)'Function'===a.paramType(o[i])&&(o[i]=o[i].call(o[i]));Ie(o,'$profile_increment');var s=we('$profile_increment'),u=a.delEmpty(Fe(s));Be(a.objMerge(u,{xcontext:o}),n)},profileAppend:function(e,r,n){t.status.FnName='$profile_append',ke(),'Object'===a.paramType(e)&&'Function'===a.paramType(r)?(n=r,r=''):'String'===a.paramType(e)&&'Function'===a.paramType(r)&&(r=r.call(r));var o=a.toObj(e,r);for(var i in o)'Function'===a.paramType(o[i])&&(o[i]=o[i].call(o[i]));Ie(o,'$profile_append');var s=we('$profile_append'),u=a.delEmpty(Fe(s));Be(a.objMerge(u,{xcontext:o}),n)},profileUnset:function(e,r){t.status.FnName='$profile_unset',ke(),'Function'===a.paramType(e)&&(e=e.call(e)),Ie(e,'$profile_unset',e);var n=a.toObj(e,'');Ie(n,'$profile_unset');var o=Fe(we('$profile_unset'));Be(a.objMerge(o,{xcontext:n}),r)},profileDelete:function(e){t.status.FnName='$profile_delete',ke(),Be(Fe(we('$profile_delete')),e)},alias:function(e,r){if(t.status.FnName='$alias',ke(),Ie(e,'$alias',!0)){c.setLocal('ARK_LOGINID',e);var n=Fe(we('$alias'));if(Be(a.delEmpty(n),r),!0===t.base.autoProfile){t.status.FnName='$profile_set_once';var o=Fe(we('$profile_set_once')),i=c.getLocal('ARKFRISTPROFILE')||a.format(new Date,'yyyy-MM-dd hh:mm:ss.SSS'),s={$first_visit_time:i,$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},u=a.objMerge(o,{xcontext:s});Be(a.delEmpty(u)),c.setLocal('ARKFRISTPROFILE',i)}}},identify:function(e,r,n){t.status.FnName='$identify',ke(),Ie(e,'$alias',!0)&&('Boolean'===a.paramType(r)&&!0===r?c.setLocal('ARK_TRACK_LOGIN',!0):'Function'===a.paramType(r)&&(n=r),c.setLocal('ARK_TRACKID',e),c.setCookie('ARK_ID',e),t.status.successCode='20002',t.status.value=e,Ne(),'Function'===a.paramType(n)&&n.call(n),window.AnalysysModal&&'function'==typeof window.AnalysysModal&&window.AnalysysModal([{xwhat:'$identify',xwho:e}]))},track:function(e,r,n){t.status.FnName=e||'$track',ke(),Ie(e,'$track',!0),t.status.FnName=e;var o={};if('Function'===a.paramType(r)&&(n=r,r={}),'Object'===a.paramType(r)){for(var i in r)'Function'===a.paramType(r[i])&&(r[i]=r[i].call(r[i]));Ie(r),o={xcontext:r}}var s=c.getLocal('ARKSUPER')||{},u=a.objMerge({xcontext:s},o),l=Fe(we('$track'));l.xcontext=a.delEmpty(l.xcontext),Be(a.objMerge(l,u),n)},registerSuperProperty:function(e,r,n){t.status.FnName='$registerSuperProperty',ke(),'Object'===a.paramType(e)&&'Function'===a.paramType(r)?(n=r,r=''):'String'===a.paramType(e)&&'Function'===a.paramType(r)&&(r=r.call(r));var o=a.toObj(e,r);for(var i in o)'Function'===a.paramType(o[i])&&(o[i]=o[i].call(o[i]));Ie(o,'$registerSuperProperty');var s=c.getLocal('ARKSUPER')||{},u=a.objMerge(s,o);c.setLocal('ARKSUPER',u),t.status.successCode='20002',t.status.value=JSON.stringify(o),Ne(),'Function'===a.paramType(n)&&n.call(n)},registerSuperProperties:function(e,r,n){t.status.FnName='$registerSuperProperties',ke(),'Object'===a.paramType(e)&&'Function'===a.paramType(r)?(n=r,r=''):'String'===a.paramType(e)&&'Function'===a.paramType(r)&&(r=r.call(r));var o=a.toObj(e,r);for(var i in o)'Function'===a.paramType(o[i])&&(o[i]=o[i].call(o[i]));Ie(o,'$registerSuperProperties');var s=c.getLocal('ARKSUPER')||{},u=a.objMerge(s,o);c.setLocal('ARKSUPER',u),t.status.successCode='20002',t.status.value=JSON.stringify(o),Ne(),'Function'===a.paramType(n)&&n.call(n)},getSuperProperty:function(e,r){t.status.FnName='$getSuperProperty',ke(),Ie(e,'$getSuperProperty',!0);var n=c.getLocal('ARKSUPER')||{},o=n[e];return!{}.hasOwnProperty.call(n,e)?(t.status.successCode='20009',o=''):(t.status.successCode='20010',t.status.value=o),t.status.key=e,Ne(),'Function'===a.paramType(r)&&r.call(r,o),o},getSuperProperties:function(e){t.status.FnName='$getSuperProperties',ke();var r=c.getLocal('ARKSUPER')||{};return t.status.successCode='20010',t.status.value=JSON.stringify(r),Ne(),'Function'===a.paramType(e)&&e.call(e,r),r},unRegisterSuperProperty:function(e,r){t.status.FnName='$unregisterSuperProperty',ke(),Ie(e,'$unregisterSuperProperty',!0);var n=c.getLocal('ARKSUPER')||{};Object.prototype.hasOwnProperty.call(n,e)?(delete n[e],c.setLocal('ARKSUPER',n),t.status.successCode='20003'):t.status.successCode='20011',t.status.value=e,Ne(),'Function'===a.paramType(r)&&r.call(r)},clearSuperProperties:Qe,reset:function(e){ke(),c.removeLocal('ARK_ID'),Qe(),xe(!0),f.setId(),!0===t.base.autoProfile?Ze({$reset_time:a.format(new Date,'yyyy-MM-dd hh:mm:ss.SSS')},e):'Function'===a.paramType(e)&&e.call(e),t.status.FnName='$reset',t.status.successCode='20005',Ne()},freeApi:function(e,r){t.status.FnName=e,ke();var n=we(e);if(n){var o=Fe(n),i=c.getLocal('ARKSUPER')||{};'Object'===a.paramType(r)&&(i=a.objMerge(i,r)),o=a.objMerge({xcontext:i},o),Be(a.delEmpty(o))}},getDistinctId:function(e){var t=h()||g();return'Function'===a.paramType(e)&&e.call(e,t),t},getPresetProperties:function(e){t.status.FnName='$getPresetProperties',ke();var r=Fe(we('$getPresetProperties'));r.xcontext.$first_visit_time=c.getLocal('ARKFRISTPROFILE')||'',delete r.xcontext.$is_login;var n=a.delEmpty(r.xcontext);return'Function'===a.paramType(e)&&e.call(e,n),n}});function tt(){var e=[];if(function(){for(var e in t.base){ke(),t.status.key=e;var r=fe[e];'$debug'===e&&(r=fe.xcontext[e]),'$lib_version'===e&&(r=fe.xcontext[e]);var n=r;if(n&&!Ce(e,t.base[e],n))return t.base[e]='',!1;Ne()}return!0}()){var r=c.getLocal('ARKSUPER')||{};if(!1===function(){var e=c.getSession('STARTUP')||!1,r=c.getCookie('ARK_STARTUP');if(''!==document.referrer&&r&&!0===t.base.cross_subdomain){var n=JSON.parse(a.decode(decodeURIComponent(r))),o=n.STARTUP,i=n.STARTUPTIME;c.setSession('STARTUP',o),c.setSession('STARTUPTIME',i),e=c.getSession('STARTUP')||!1}if(!1===e){var s=a.format(new Date,'yyyy-MM-dd hh:mm:ss.SSS');c.setSession('STARTUP',!0),c.setSession('STARTUPTIME',s),f.setId(),!0===t.base.cross_subdomain&&c.setCookie('ARK_STARTUP',encodeURIComponent(a.encode(JSON.stringify({STARTUP:!0,STARTUPTIME:s}))),'session')}return e}()){var n=!0;if((a.checkTypeList(t.base.startUpBlackList)||t.base.startUpWhiteList&&!a.checkTypeList(t.base.startUpWhiteList))&&(n=!1),!0===n){t.status.FnName='$startup';var o=Fe(we('$startup'));o=a.objMerge(o,{xcontext:r}),e.push(a.delEmpty(o))}}var i=c.getLocal('ARKFRISTPROFILE')||!1;if(!0===t.base.autoProfile&&!i){t.status.FnName='$profile_set_once';var s=Fe(we('$profile_set_once')),u=c.getLocal('ARKFRISTPROFILE')||a.format(new Date,'yyyy-MM-dd hh:mm:ss.SSS'),l={$first_visit_time:u,$first_visit_language:(navigator.language||navigator.browserLanguage).toLowerCase()},p=a.objMerge(s,{xcontext:l});e.push(a.delEmpty(p)),c.setLocal('ARKFRISTPROFILE',u)}if(!0===t.base.auto){var m=Xe(t.base.pageProperty);e.push(m),!0!==t.base.hash&&!0!==t.base.singlePage||a.changeHash((function(){qe!==window.location.href&&(qe=window.location.href,ze())}))}e.length>0&&Be(e)}else Re()}function rt(e){var t=e.toLowerCase();return'ios'===t?'iOS':'android'===t?'Android':e}var nt=!1;window.AnalysysAgent=window.AnalysysAgent||{};var at=window.AnalysysAgent,ot=at.config||{},it=[];if(!0!==at.isInit)for(var st in et)at[st]=function(e){return function(){var t=arguments;if(e.indexOf('get')>-1)return et[e].apply(et[e],t);it.push([e,arguments])}}(st);function ut(){for(var e in at.isInit=!0,et)at[e]=et[e];for(var r in ot)'Function'===a.paramType(q[r])?q[r](ot[r]):t.base[r]=ot[r];at.config=a.objMerge(t.base,ot),t.base=at.config,xe();for(var n=0;n<it.length;n++){var o=it[n];a.objHasKay(et,o[0])&&('identify'===o[0]||'alias'===o[0]||o[0].indexOf('Super')>-1)&&et[o[0]].apply(et[o[0]],o[1])}de.AnalysysAgent&&de.AnalysysAgent.init&&de.AnalysysAgent.init(t.base),tt();for(var i=0;i<it.length;i++){var s=it[i];a.objHasKay(et,s[0])&&'identify'!==s[0]&&'alias'!==s[0]&&s[0].indexOf('Super')<0&&et[s[0]].apply(et[s[0]],s[1])}}at.init=function(e){'Object'===a.paramType(ot)&&(ot=e,function(e){if(!1!==nt)return e.call(e);Promise.all([new Promise((function(e){window.HWH5?window.HWH5.getDeviceInfo().then((function(r){var n=rt(r.osType);if(t.system.$os=rt(r.osType),'iOS'===n)t.system.$brand='Apple',t.system.$os_version=r.osVersion;else if('Android'===n){var a=r.deviceModel||'';if(a.indexOf('_')>-1){var o=a.split('_');t.system.$model=o[1]||'',t.system.$os_version=o[2]||''}}else t.system.$brand=r.deviceModel||'',t.system.$os=rt(r.osType),t.system.$os_version=r.osVersion;e()})).catch((function(){e()})):e({})})),new Promise((function(e){window.HWH5?window.HWH5.getNetworkType().then((function(r){var n=r.type;'Number'===a.paramType(n)&&(n=''+n),t.system.$network=n,e()})).catch((function(){e({})})):e({})}))]).then((function(){nt=!0,e.call(e)})).catch((function(){nt=!0,e.call(e)}))}(ut))};export default at;
