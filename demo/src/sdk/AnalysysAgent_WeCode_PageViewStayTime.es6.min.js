var t='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';function e(){}e.prototype.paramType=function(t){return Object.prototype.toString.call(t).replace('[object ','').replace(']','')},e.prototype.objHasKay=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.prototype.ArrayToObj=function(t){for(var e={},r=0;r<t.length;r++)e[t[r]]='';return e},e.prototype.keyValueToObje=function(t,e){var r={};return r[t]=e,r},e.prototype.toDeep=function(t){var e=null;if('Array'===this.paramType(t)){e=[];for(var r=0;r<t.length;r++)e.push(this.toDeep(t[r]))}else if('Object'===this.paramType(t))for(var n in e={},t)e[n]=this.toDeep(t[n]);else e=t;return e},e.prototype.toDeepObj=function(t,e){var r={};if('String'===this.paramType(t))return r=this.keyValueToObje(t,e);if('Array'===this.paramType(t))return r=this.ArrayToObj(t);if('Object'===this.paramType(t))for(var n in t)r[n]=this.toDeepObj(t[n]);return r},e.prototype.toDeep=function(t){var e=null;if('Array'===this.paramType(t)){e=[];for(var r=0;r<t.length;r++)e.push(this.toDeep(t[r]))}else if('Object'===this.paramType(t))for(var n in e={},t)e[n]=this.toDeep(t[n]);else e=t;return e},e.prototype.toObj=function(t,e){var r={};return'String'===this.paramType(t)?r=this.keyValueToObje(t,e):'Array'===this.paramType(t)?r=this.ArrayToObj(t):'Object'===this.paramType(t)?t:r},e.prototype.objMerge=function(t,e){if('Object'!==this.paramType(t)||'Object'!==this.paramType(e))return t;var r={};for(var n in t)r[n]=t[n];for(var o in e){var a=e[o],i=r[o],p=this.paramType(a),u=this.paramType(i);r[o]=i&&'Object'===u&&'Object'===p?this.objMerge(i,a):'Array'===u&&'Array'===p?this.arrayMergeUnique(i,a):'Function'===p&&'Function'===u?this.compose(i,a):a}return r},e.prototype.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},e.prototype.fnMerge=function(t,e){return this.objMerge(t,e)},e.prototype.arrayUnique=function(t){for(var e=[],r={},n=0;n<t.length;n++)r[t[n]]||(r[t[n]]=!0,e.push(t[n]));return e},e.prototype.arrayMerge=function(t,e){for(var r=[],n=0;n<t.length;n++){var o=t[n];'Object'===this.paramType(t[n])&&(o=this.toDeep(t[n])),r.push(o)}for(var a=0;a<e.length;a++){var i=e[a];'Object'===this.paramType(e[a])&&(i=this.toDeep(e[a])),r.push(i)}return r},e.prototype.arrayMergeUnique=function(t,e){return t.push.apply(t,e),this.arrayUnique(t)},e.prototype.encode=function(e){var r,n,o,a,i,p,u,c='',l=0;for(e=function(t){t=t.replace(/\r\n/g,'\n');for(var e='',r=0;r<t.length;r++){var n=t.charCodeAt(r);n<128?e+=String.fromCharCode(n):n>127&&n<2048?(e+=String.fromCharCode(n>>6|192),e+=String.fromCharCode(63&n|128)):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128),e+=String.fromCharCode(63&n|128))}return e}(e);l<e.length;)a=(r=e.charCodeAt(l++))>>2,i=(3&r)<<4|(n=e.charCodeAt(l++))>>4,p=(15&n)<<2|(o=e.charCodeAt(l++))>>6,u=63&o,isNaN(n)?p=u=64:isNaN(o)&&(u=64),c=c+t.charAt(a)+t.charAt(i)+t.charAt(p)+t.charAt(u);return c},e.prototype.decode=function(e){var r,n,o,a,i,p,u='',c=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,'');c<e.length;)r=t.indexOf(e.charAt(c++))<<2|(a=t.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(i=t.indexOf(e.charAt(c++)))>>2,o=(3&i)<<6|(p=t.indexOf(e.charAt(c++))),u+=String.fromCharCode(r),64!==i&&(u+=String.fromCharCode(n)),64!==p&&(u+=String.fromCharCode(o));return u=function(t){for(var e='',r=0,n=0,o=0,a=0;r<t.length;)(n=t.charCodeAt(r))<128?(e+=String.fromCharCode(n),r++):n>191&&n<224?(o=t.charCodeAt(r+1),e+=String.fromCharCode((31&n)<<6|63&o),r+=2):(o=t.charCodeAt(r+1),a=t.charCodeAt(r+2),e+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),r+=3);return e}(u)},e.prototype.isEmptyObject=function(t){for(var e in t)return!1;return!0},e.prototype.format=function(t,e){var r=t.getTimezoneOffset(),n={'M+':(t=new Date(t.getTime()+60*r*1e3+288e5)).getMonth()+1,'d+':t.getDate(),'h+':t.getHours(),'m+':t.getMinutes(),'s+':t.getSeconds(),'q+':Math.floor((t.getMonth()+3)/3),'S+':t.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+'').substr(4-RegExp.$1.length))),n)new RegExp('('+o+')').test(e)&&(e=e.replace(RegExp.$1,3===RegExp.$1.length?(''+n[o]).length<3?('00'+n[o]).substr(('00'+n[o]).length-3,('00'+n[o]).length):n[o]:('00'+n[o]).substr((''+n[o]).length)));return e},e.prototype.MD5=function(t,e){function r(t,e){return t<<e|t>>>32-e}function n(t,e){var r,n,o,a,i;return o=2147483648&t,a=2147483648&e,i=(1073741823&t)+(1073741823&e),(r=1073741824&t)&(n=1073741824&e)?2147483648^i^o^a:r|n?1073741824&i?3221225472^i^o^a:1073741824^i^o^a:i^o^a}function o(t,e,o,a,i,p,u){return t=n(t,n(n(function(t,e,r){return t&e|~t&r}(e,o,a),i),u)),n(r(t,p),e)}function a(t,e,o,a,i,p,u){return t=n(t,n(n(function(t,e,r){return t&r|e&~r}(e,o,a),i),u)),n(r(t,p),e)}function i(t,e,o,a,i,p,u){return t=n(t,n(n(function(t,e,r){return t^e^r}(e,o,a),i),u)),n(r(t,p),e)}function p(t,e,o,a,i,p,u){return t=n(t,n(n(function(t,e,r){return e^(t|~r)}(e,o,a),i),u)),n(r(t,p),e)}function u(t){var e,r='',n='';for(e=0;e<=3;e++)r+=(n='0'+(t>>>8*e&255).toString(16)).substr(n.length-2,2);return r}var c,l,h,s,f,d,y,g,m,w;for(c=function(t){for(var e,r=t.length,n=r+8,o=16*((n-n%64)/64+1),a=Array(o-1),i=0,p=0;p<r;)i=p%4*8,a[e=(p-p%4)/4]=a[e]|t.charCodeAt(p)<<i,p++;return i=p%4*8,a[e=(p-p%4)/4]=a[e]|128<<i,a[o-2]=r<<3,a[o-1]=r>>>29,a}(t),y=1732584193,g=4023233417,m=2562383102,w=271733878,l=0;l<c.length;l+=16)h=y,s=g,f=m,d=w,y=o(y,g,m,w,c[l+0],7,3614090360),w=o(w,y,g,m,c[l+1],12,3905402710),m=o(m,w,y,g,c[l+2],17,606105819),g=o(g,m,w,y,c[l+3],22,3250441966),y=o(y,g,m,w,c[l+4],7,4118548399),w=o(w,y,g,m,c[l+5],12,1200080426),m=o(m,w,y,g,c[l+6],17,2821735955),g=o(g,m,w,y,c[l+7],22,4249261313),y=o(y,g,m,w,c[l+8],7,1770035416),w=o(w,y,g,m,c[l+9],12,2336552879),m=o(m,w,y,g,c[l+10],17,4294925233),g=o(g,m,w,y,c[l+11],22,2304563134),y=o(y,g,m,w,c[l+12],7,1804603682),w=o(w,y,g,m,c[l+13],12,4254626195),m=o(m,w,y,g,c[l+14],17,2792965006),y=a(y,g=o(g,m,w,y,c[l+15],22,1236535329),m,w,c[l+1],5,4129170786),w=a(w,y,g,m,c[l+6],9,3225465664),m=a(m,w,y,g,c[l+11],14,643717713),g=a(g,m,w,y,c[l+0],20,3921069994),y=a(y,g,m,w,c[l+5],5,3593408605),w=a(w,y,g,m,c[l+10],9,38016083),m=a(m,w,y,g,c[l+15],14,3634488961),g=a(g,m,w,y,c[l+4],20,3889429448),y=a(y,g,m,w,c[l+9],5,568446438),w=a(w,y,g,m,c[l+14],9,3275163606),m=a(m,w,y,g,c[l+3],14,4107603335),g=a(g,m,w,y,c[l+8],20,1163531501),y=a(y,g,m,w,c[l+13],5,2850285829),w=a(w,y,g,m,c[l+2],9,4243563512),m=a(m,w,y,g,c[l+7],14,1735328473),y=i(y,g=a(g,m,w,y,c[l+12],20,2368359562),m,w,c[l+5],4,4294588738),w=i(w,y,g,m,c[l+8],11,2272392833),m=i(m,w,y,g,c[l+11],16,1839030562),g=i(g,m,w,y,c[l+14],23,4259657740),y=i(y,g,m,w,c[l+1],4,2763975236),w=i(w,y,g,m,c[l+4],11,1272893353),m=i(m,w,y,g,c[l+7],16,4139469664),g=i(g,m,w,y,c[l+10],23,3200236656),y=i(y,g,m,w,c[l+13],4,681279174),w=i(w,y,g,m,c[l+0],11,3936430074),m=i(m,w,y,g,c[l+3],16,3572445317),g=i(g,m,w,y,c[l+6],23,76029189),y=i(y,g,m,w,c[l+9],4,3654602809),w=i(w,y,g,m,c[l+12],11,3873151461),m=i(m,w,y,g,c[l+15],16,530742520),y=p(y,g=i(g,m,w,y,c[l+2],23,3299628645),m,w,c[l+0],6,4096336452),w=p(w,y,g,m,c[l+7],10,1126891415),m=p(m,w,y,g,c[l+14],15,2878612391),g=p(g,m,w,y,c[l+5],21,4237533241),y=p(y,g,m,w,c[l+12],6,1700485571),w=p(w,y,g,m,c[l+3],10,2399980690),m=p(m,w,y,g,c[l+10],15,4293915773),g=p(g,m,w,y,c[l+1],21,2240044497),y=p(y,g,m,w,c[l+8],6,1873313359),w=p(w,y,g,m,c[l+15],10,4264355552),m=p(m,w,y,g,c[l+6],15,2734768916),g=p(g,m,w,y,c[l+13],21,1309151649),y=p(y,g,m,w,c[l+4],6,4149444226),w=p(w,y,g,m,c[l+11],10,3174756917),m=p(m,w,y,g,c[l+2],15,718787259),g=p(g,m,w,y,c[l+9],21,3951481745),y=n(y,h),g=n(g,s),m=n(m,f),w=n(w,d);return 32===e?u(y)+u(g)+u(m)+u(w):u(g)+u(m)},e.prototype.clientTimeZone=function(){var t=(new Date).getTimezoneOffset(),e=parseInt(t/60),r=t%60,n='-';return(e<=0||r<0)&&(n='+',e=-e,r<0&&(r=-r)),1===(e+='').length&&(e='0'+e),1===(r+='').length&&(r='0'+r),n+e+':'+r},e.prototype.delEmpty=function(t){var e={};for(var r in t){var n=!0,o=this.paramType(t[r]);'Object'!==o?(t[r]||'Number'===o&&!isNaN(t[r])||'Boolean'===o||(n=!1),!0===n&&(e[r]=t[r])):e[r]=this.delEmpty(t[r])}for(var a in e){var i=[];for(var p in e[a])i.push(e[a][p]);0===i.length&&e[a].constructor===Object&&delete e[a]}return e},e.prototype.addEvent=function(t,e,r,n){if(document.addEventListener)if('Array'!==this.paramType(t)&&'HTMLCollection'!==this.paramType(t)||!t.length||t===window)t.addEventListener(e,r,n);else for(var o=0;o<t.length;o++)this.addEvent(t[o],e,r,n);else if(t.length&&t!==window)for(var a=0;a<t.length;a++)this.addEvent(t[a],e,r);else t.attachEvent('on'+e,(function(){return r.call(t,window.event)}))},e.prototype.GetUrlParam=function(t){var e=document.location.toString(),r=window.name;'String'===this.paramType(r)&&r.indexOf(t)>-1&&(e=r);var n,o=e.split('?');if(o.length>1){for(var a,i=[],p=1;p<o.length;p++)i.push.apply(i,o[p].split('&'));for(var u=0;u<i.length;u++)if(null!=(a=i[u].split('='))&&a[0]===t){var c=a[1];if(a[1].indexOf('#')>-1&&(c=c.split('#')[0]),c.indexOf('%')>-1){try{var l=decodeURI(c);if(n=l,new RegExp('[\\u4E00-\\u9FFF]+','g').test(n))return l}catch(t){}if('Object'===this.paramType(window.AnalysysModule)&&'Function'===this.paramType(window.AnalysysModule.decodeGBK))try{return window.AnalysysModule.decodeGBK(c,'gbk')}catch(t){}}return c}return''}return''},e.prototype.stringSlice=function(t,e){return t.slice(0,e)},e.prototype.trim=function(t){return'String'===this.paramType(t)?t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,''):t},e.prototype.changeHash=function(t){var e=window.history.pushState,r=window.history.replaceState;window.history.pushState=function(){e.apply(window.history,arguments),t.apply(t)},window.history.replaceState=function(){r.apply(window.history,arguments),t.apply(t)};var n;'on'+(n=window.ActiveXObject||'ActiveXObject'in window?'hashchange':'popstate')in window&&this.addEvent(window,n,(function(){setTimeout(t,0)}))},e.prototype.checkTypeList=function(t,e){var r=this.paramType(t);if('String'===r){var n=window.location.href,o=window.location.protocol+'//'+window.location.host,a=o+window.location.pathname;if([n,o,a+'index.html',a,a+window.location.hash].indexOf(t)>-1)return!0}else{if('Function'===r)return t.call(t,e);if('Array'===r)for(var i=0;i<t.length;i++)if(!0===this.checkTypeList(t[i],e))return!0}return!1},e.prototype.selectorAllEleList=function(t){var e=[],r=t.split('.')[0];if('Function'===this.paramType(document.querySelectorAll)&&t.indexOf('|')<0)try{return document.querySelectorAll(t)}catch(t){}var n='';if(t.indexOf('#')>-1){n=t.split('.')[0].split('#')[1];var o=document.getElementById(n);o&&e.push(o)}else{if(t.indexOf('.')<0)return document.getElementsByTagName(r);if(t.indexOf('[')>-1&&t.indexOf(']')>-1)for(var a=document.getElementsByTagName('*'),i=t.replace('[','').replace(']',''),p=0;p<a.length;p++){var u=a[p].getAttribute(i);'String'===this.paramType(u)&&e.push(o)}else for(var c=document.getElementsByTagName(r),l=0;l<c.length;l++){var h=c[l],s='String'===this.paramType(h.className)?h.className.split(' '):[];s.length>0&&(r+'.'+s.join('.')).indexOf(t)>-1&&e.push(h)}}return e},e.prototype.getDomainFromUrl=function(t,e){if(''===e)return'';var r=(e=e||window.location.hostname).split('/');r.length>2&&(e=r[2]);if(!0===/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(e)||'localhost'===e)return'';var n=e.split('.'),o=!0===t?2:n.length;('Number'!==this.paramType(o)||o<2)&&(o=2);var a=[];if(!(n.length>1))return'';n.length<o&&(o=n.length);for(var i=n.length-1;i>=0&&a.length!==o;i--)a.push(n[i]);return a.reverse().join('.')},e.prototype.getUrlPath=function(){var t=window.location.hash;return t.indexOf('?')>-1&&(t=t.split('?')[0]),window.location.host+window.location.pathname+t};var r=new e;function n(t){var e=+new Date;!1===c&&(u=e-p+u);var n=Number(e-i-u);if(n<0&&(n=Number(e-i)),window.AnalysysAgent&&window.AnalysysAgent.track){var a={pageStayTime:n,$url:l};h&&(a.$title=h),window.AnalysysAgent.track('page_close',a),'Function'===r.paramType(t)&&t.call(t,null)}else console.log('Analsysy weCode SDK not init!');o()}function o(t,e){var r=+new Date;i=t||r,p=t||r,u=0,c=!0,l=window.location.href,h=arguments.length>1?e:document.title}var a=+new Date,i=a,p=a,u=0,c=!0,l=window.location.href,h=document.title,s=!0;function f(t){'Object'===r.paramType(t)&&'Boolean'===r.paramType(t.autoPageClose)&&(s=t.autoPageClose)}'onpageShow'in window?(r.addEvent(window,'pageShow',(function(){i=p=+new Date})),r.addEvent(window,'pagehide',(function(){!0===s&&n()}))):(r.addEvent(window,'load',(function(){i=p=+new Date})),r.addEvent(window,'beforeunload',(function(){!0===s&&n()}))),'onvisibilitychange'in document&&r.addEvent(document,'visibilitychange',(function(){document.hidden?(c=!1,p=+new Date):(c=!0,u=+new Date-p+u)})),window.AnalysysModule=r.objMerge(window.AnalysysModule||{},{pageClose:{Version:'4.4.0.6',pageEndTrack:n,init:f,createTime:o}});export{f as pageCloseInit,n as pageEndTrack};
